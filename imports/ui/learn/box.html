<template name="boxAccess">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{#if hasPermission}}
                {{#if isProfileCompleted this._id}}
                    {{> box}}
                {{else}}
                    {{> access_denied_profile_incomplete_content_only}}
                {{/if}}
            {{else}}
                <h4>{{_ "permission"}}</h4>
            {{/if}}
        {{/if}}
    {{/if}}
</template>

<template name="box">

    <!-- Main -->
    <div class="col-xs-12">
        {{#if noCards}}
            {{> boxEmpty}}
        {{else}}
            {{#if isFinished}}
                {{> boxEnd}}
            {{else}}
                {{> boxMain}}
            {{/if}}
        {{/if}}
        <br>
        <br>
        <button class="btn btn-block btn-raised btn-danger" id="backButton">
            <span class="pull-left">{{_ "backbutton"}}</span>
        </button>
        {{> graph}}
    </div>
    <!-- Permission denied -->

</template>

<!-- Empty -->
<template name="boxEmpty">
    <div class="box innerBox">
        <div class="block emptyCard">
            <div class="centered front">
                <p>{{_ "learnedEverything"}}</p>
            </div>
        </div>
    </div>
</template>


<!-- Mainscreen -->
<template name="boxMain">
    <div id="answerOptions">
        <br>
        <br>
        <br>
        {{#if isFront}}
            <!-- Helptext -->
            <div class="learn-cardHelptext">
                <br>
                <span>{{_ "clickcart"}}</span>
            </div>
        {{else}}
            <!-- Navigation -->
            <br>
            <div id="learn-navigation" class="btn-group btn-group-justified">
                <div class="btn-group" role="group">
                    <button class="btn btn-raised btn-primary answer card-success" id="known">{{_ "know"}}</button>
                </div>
                <div class="btn-group" role="group">
                    <button class="btn btn-raised btn-default answer card-fail" id="notknown">{{_ "notknow"}}</button>
                </div>
            </div>
        {{/if}}
    </div>
    <br>
    <br>
    <br>
    <br>
    {{> boxPictureForm}}
    {{> flashcards}}
</template>

<template name="graph">
    <div class="well well-sm sidebar-nav" style="margin-top: 20px">
        <div id="container" style="min-width: 100%;
			max-width: 100%; min-height: 100%; max-height: 100%;  margin: 0 auto">
            <h3 class="panel-title">{{_ "admin.learnedCardsets"}}</h3>
            <canvas id="boxChart" width="800" height="470" style="margin-top: 10px" data-box1="{{countBox 1}}"
                    data-box2="{{countBox 2}}" data-box3="{{countBox 3}}" data-box4="{{countBox 4}}"
                    data-box5="{{countBox 5}}" data-box6="{{countBox 6}}"></canvas>
        </div>
    </div>
</template>


<template name="appLayout5">
    <div class="container">
        {{> yield}}
    </div>
</template>

<!-- Endscreen -->
<template name="boxEnd">
    <div class="box learn-endscreen innerBox">
        <div class="block emptyCard">
            <div class="centered front learnbox-success">{{getNextCardTime}}</div>
        </div>
    </div>
</template>

<template name="boxPictureForm">
    <div class="modal fade" id="boxPictureModal" tabindex="-1" role="dialog" aria-labelledby="boxPictureModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="boxPictureModalTitle" class="modal-title"></h4>
                </div>
                <div class="modal-body" id="setdetails-boxPictureModal-body"></div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->

</template>
