<template name="cardsets">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{> showLicense}}
            {{#if isActiveRoute regex='alldecks|create'}}
                {{> cardsetDeleteForm}}
                {{> cardsetCourseIterationForm}}
                {{> create}}
            {{/if}}

            {{#if isActiveRoute 'learn'}}
                {{> learn}}
            {{/if}}

            {{#if isActiveRoute 'shuffle'}}
                {{> cardsetCourseIterationForm}}
                {{> shuffle}}
            {{/if}}
        {{/if}}
    {{/if}}
</template>

<template name="shuffle">
    {{#if canShuffle}}
        {{#unless isShuffleRoute}}
            {{#if shuffleList.count}}
                <a href="shuffle" id="shuffleCardsets" class="btn btn-raised btn-success" role="button">{{_
                        "set-list.shuffleCardsets"}}</a>
            {{/if}}
        {{else}}
            <div class="col-md-12" id="set-list-region">
                <div class="bs-callout bs-callout-info selectionInfo">
                    {{#if isActiveRoute 'shuffle'}}
                        <a href="learn" id="cancelShuffle" class="btn btn-raised btn-danger" role="button">{{_
                                "declinecard"}}</a>
                        {{#if gotShuffledCards}}
                            <a href="#" id="createShuffledCardset" class="btn btn-raised btn-success" role="button"
                               data-toggle="modal"
                               data-target="#setCardsetCourseIterationFormModal" {{disableIfOffline}}>{{_
                                    "set-list.shuffle"}}</a>
                        {{/if}}
                        <span class="text">
                            {{_ "set-list.shuffleInfoTextNew"}}
                        </span>
                    {{/if}}
                    {{#if isActiveRoute 'editshuffle'}}
                        {{#if gotShuffledCards}}
                            <button href="#" id="updateShuffledCardset" class="btn btn-raised btn-success"
                                    role="button" {{disableIfOffline}}>{{_
                                    "set-list.shuffle"}}</button>
                        {{/if}}
                        <button id="cancelUpdateShuffle" class="btn btn-raised btn-danger" role="button">{{_
                                "declinecard"}}</button>
                        <span class="text">
                            {{_ "set-list.shuffleInfoTextEdit"}}
                        </span>
                    {{/if}}
                    {{#if displayRemoveButton}}
                        <button href="#" id="removeShuffledCards" class="btn btn-raised btn-danger"
                                role="button" {{disableIfOffline}}>{{_
                                "set-list.shuffleRemove"}}</button>
                    {{/if}}
                </div>
                <br>
                {{#if shuffleList.count}}
                    {{> filterNavigation}}
                    {{#each shuffleList}}
                        {{#unless isActiveCardset}}
                            {{> cardsetCourseIterationResultRow extendContext 'index' @index}}
                        {{/unless}}
                    {{/each}}
                {{else}}
                    {{> cardsetEmpty}}
                {{/if}}
            </div>
        {{/unless}}
    {{/if}}
</template>

<template name="create">
    <div class="col-md-12" id="set-list-region">
        {{#if cardsetList.count}}
            {{#if isActiveRoute 'create'}}
                <button id="newCardSet" type="button" class="btn btn-raised btn-success saveSet" data-toggle="modal"
                        data-target="#setCardsetCourseIterationFormModal" {{disableIfOffline}} {{disableIfShuffle}}>
                    {{_ "set-list-empty.newset"}}
                </button>
            {{/if}}
        {{/if}}
        {{> shuffle}}
        {{#if isActiveRoute 'create'}}
            <label class="btn btn-raised btn-import btn-success {{disableIfOffline}}">
                {{_ "import.cardset"}} <input type="file" id="importCardset" style="display: none;">
            </label>
        {{/if}}
        {{> filterNavigation}}
        {{#if cardsetList.count}}
            {{#each cardsetList}}
                {{> cardsetCourseIterationResultRow extendContext 'index' @index}}
            {{/each}}
            {{> infiniteScroll}}
        {{else}}
            {{#if isActiveRoute 'create'}}
                {{> cardsetEmpty}}
            {{else}}
                {{> poolCardsetEmpty}}
            {{/if}}
        {{/if}}
    </div>
</template>

<template name="cardsetEmpty">
    <div class="empty-list">
        <div align="center" height="60" colspan="3" class="emptyCellList set-list-empty">
            {{#if isActiveRoute 'create'}}
                <span class="emptyTextList">
                    {{_ "set-list-empty.emptytextlist"}}
                </span>
                <br>
                <button id="setListEmpty" class="btn btn-raised btn-success btn-newSet" data-toggle="modal"
                        data-target="#setCardsetCourseIterationFormModal">{{_ "set-list-empty.newset"}}</button>
            {{/if}}

            {{#if isActiveRoute 'learn'}}
                <span class="emptyTextList">
                    {{#if canShuffle}}
                        {{_ "set-list-learn-empty.emptytextlist"}}
                    {{else}}
                        {{_ "set-list-learn-empty.emptytextlistNoShuffle"}}
                    {{/if}}
                </span>
                <br>
                <button id="browseCardset" class="btn btn-raised btn-success btn-newSet">{{_
                        "set-list-learn-empty.browseCardset"}}</button>
                <button id="browseCourse" class="btn btn-raised btn-success btn-newSet" data-toggle="modal"
                        data-target="#underDevelopmentModal">{{_
                        "set-list-learn-empty.browseCourse"}}</button>
            {{/if}}
        </div>
    </div>
</template>

<template name="learn">
    {{> selectModeForm}}
    <div id="learn-list-region" class="col-md-12">
        {{#if learnList.count}}
            <a id="browseCardset" class="btn btn-raised btn-success">{{_
                    "set-list-learn-empty.browseCardset"}}</a>
            <a id="browseCourse" class="btn btn-raised btn-success" data-toggle="modal"
               data-target="#underDevelopmentModal">{{_
                    "set-list-learn-empty.browseCourse"}}</a>
        {{/if}}
        {{> shuffle}}
        {{#if learnList.count}}
            {{> filterNavigation}}
            {{#each learnList}}
                {{> cardsetCourseIterationResultRow extendContext 'index' @index}}
            {{/each}}
            {{> infiniteScroll}}
        {{else}}
            {{> cardsetEmpty}}
        {{/if}}
        {{> cardsetsConfirmLearnForm}}
    </div>
</template>

<template name="selectModeForm">
    <div class="modal fade" id="selectModeToLearnModal" tabindex="-1" role="dialog"
         aria-labelledby="selectModeToLearnTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="selectModeToLearnTitle" class="modal-title">{{_ "learn"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <hr/>
                    <button id="learnBox"
                            class="btn btn-raised btn-success learn" {{disableIfOffline}} data-dismiss="modal">{{_
                            "learnfile"}}</button>
                    <button id="learnMemo"
                            class="btn btn-raised btn-success memo pull-right" {{disableIfOffline}}
                            data-dismiss="modal">{{_
                            "memo"}}</button>
                </div>
                <br>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="cardsetsConfirmLearnForm">
    <div class="modal fade" id="confirmLearnModal" tabindex="-1" role="dialog"
         aria-labelledby="confirmLearnModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="confirmLearnModalTitle" class="modal-title">{{_ "confirm-form-learn.title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-form-learn.text"}}</p>
                    <br/>
                    <hr/>

                    <button id="learnDelete" class="btn btn-danger btn-raised btn-setDelete" {{disableIfOffline}}>{{_
                            "confirm-form-learn.title"}}</button>
                    <button id="learnCancel" class="btn btn-raised pull-right" data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="cardsetDeleteForm">
    <div class="modal fade" id="confirmDeleteCardsetModal" tabindex="-1" role="dialog"
         aria-labelledby="confirmDeleteCardsetModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="confirmDeleteCardsetModalTitle" class="modal-title">{{_
                            "cardset.confirm-form-delete.title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "cardset.confirm-form-delete.text"}}</p>
                    <hr/>
                    <button id="deleteCardset"
                            class="btn btn-danger btn-raised btn-setDelete" {{disableIfOffline}}>{{_
                            "cardset.confirm-form-delete.title"}}</button>
                    <button id="cancelDelete" class="btn btn-raised pull-right" data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>
