<template name="cardsetAccess">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{#if hasPermission}}
                {{#if learningActive}}
                    {{#if isProfileCompleted this._id}}
                        {{> cardset}}
                    {{else}}
                        {{> access_denied_profile_incomplete_content_only}}
                    {{/if}}
                {{else}}
                    {{> cardset}}
                {{/if}}
            {{else}}
                <div class="col-md-12">
                    <h4>{{_ "permission"}}</h4>
                </div>
            {{/if}}
        {{/if}}
    {{/if}}
</template>

<template name="cardset">
    {{#unless fullscreenActive}}
        {{> cardsetInfo}}
        {{> showLicense}}
        {{> cardsetForm}}
        {{> cardsetImportForm}}
        {{> cardsetPublishForm}}
        {{> bonusForm}}
        {{> cardsetEndLearnForm}}
        {{> selectLicenseForm}}
        {{> reportCardsetForm}}
        {{> deleteCardsForm}}
        {{> resetLeitnerForm}}
        {{> resetMemoForm}}
        {{> leaveLearnPhaseForm}}
        {{> leaveCardsetForm}}
        {{> leaveEditorsForm}}
        {{> chooseFlashcards}}
    {{/unless}}
    {{#if hasCardsetPermission}}
        {{#unless learningActiveAndEditor}}
            {{selectedForLearning}}
        {{/unless}}
        {{#if isActiveRoute regex='cardsetdetailsid|cardsetcard'}}
            {{#unless learningActiveAndNotEditor}}
                {{#if this.quantity}}
                    <div class="hidden-xs col-xs-12">
                        {{> cardNavigation}}
                    </div>
                    <div class="hidden-xs col-xs-12">
                        {{> flashcards cardset=this}}
                    </div>
                {{/if}}
            {{/unless}}
        {{/if}}
        {{#if isActiveRoute 'cardsetlistid'}}
            <div class="col-xs-12">
                <button class="btn btn-raised btn-danger" id="{{#if
                        fullscreenActive}}backToCardsetDetailViewFullscreen{{else}}backToCardsetDetailView{{/if}}">
                    <span class="pull-left"><i class="fa fa-arrow-left"></i> {{_ "cardset.list.back"}}</span>
                </button>
                {{> cardsetList}}
            </div>
        {{/if}}
    {{else}}
        {{#if this.quantity}}
            <div class="col-xs-12">
                {{> cardNavigation}}
            </div>
            <div class="col-xs-12">
                {{> flashcards cardset=this}}
            </div>
        {{/if}}
    {{/if}}
</template>


<template name="cardsetInfoBox">
    <a id="collapseCardsetInfoButton"
       class="col-xs-12 card btn-default btn-raised {{getColors}} collapseButton collapsed" href="#collapseCardsetInfo"
       data-toggle="collapse">
        <strong>{{#if this.shuffled}}{{_ "set-list.cardsetInfoRepetitorium"}}{{else}}{{_
                "set-list.cardsetInfoStatic"}}{{/if}}</strong>
        <i id="collapseCardsetInfoIcon" class="glyphicon glyphicon-collapse-down pull-right"></i>
    </a>
    <div class="collapse" id="collapseCardsetInfo">
        <div class="card card-block">
            <table class="table table-condensed table-striped table-hover infoBoxTable">
                <tbody>
                {{> cardsetInfoBoxContentOne}}
                {{> cardsetInfoBoxContentTwo}}
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="cardsetInfoBoxContentOne">
    <tr class="{{#if isActiveRoute
                     regex="pool|course|create|learn|shuffle"}}visible-xs{{/if}}">
        <td>{{_ "cardset.info.author"}}:</td>
        <td>
            {{#if gotMultipleAuthorsAndIsHome this}}
                {{_ "cardset.info.multipleAuthors"}}
            {{else}}
                {{#each getAuthors this}}
                    {{getAuthorName this.owner false}}<br>
                {{/each}}
            {{/if}}
        </td>
    </tr>
    {{#if this.shuffled}}
        <tr>
            <td>{{_ "cardset.info.publisher"}}:</td>
            <td>
                {{getAuthorName this.owner false}}
            </td>
        </tr>
    {{/if}}
    {{#unless this.shuffled}}
        {{#if gotOriginalAuthorData}}
            <tr>
                <td>{{_ "cardset.info.originalAuthor"}}:</td>
                <td>
                    {{getOriginalAuthorName this.originalAuthorName false}}
                </td>
            </tr>
        {{/if}}
    {{/unless}}
    {{#if isActiveRoute regex="learn"}}
        <tr>
            <td>{{_ "set-list.learningMode"}}:</td>
            <td>
                {{getLearningMode}}
            </td>
        </tr>
    {{/if}}
    {{#unless isActiveRoute regex="home"}}
        {{#if getReviewer}}
            <tr>
                <td>{{_ "cardset.info.reviewer"}}:</td>
                <td><a
                        href="{{pathFor 'profileSettings' _id=reviewer}}">{{getAuthorName this.reviewer}}</a>
                </td>
            </tr>
        {{/if}}
    {{/unless}}
    {{#if isActiveRoute regex="home"}}
        <tr>
            <td>{{_ "set-list.category"}}:</td>
            <td>
                {{{getKindText this.kind 1}}}
            </td>
        </tr>
    {{/if}}
    {{#unless isShuffledCardset this._id}}
        {{#unless isActiveRoute regex="course"}}
            <tr>
                <td>{{_ "cardType"}}:</td>
                <td>
                    {{getCardType}}
                </td>
            </tr>
            <tr>
                <td>{{#if gotNotesForDifficultyLevel}}{{_ "difficultyNotes"}}{{else}}{{_
                        "difficulty"}}{{/if}}:
                </td>
                <td>
                    {{getDifficultyName}}
                </td>
            </tr>
        {{/unless}}
    {{/unless}}
    {{#unless isActiveRoute regex="create|learn|pool|shuffle"}}
        <tr>
            <td>{{_ "cardset.info.quantity"}}:</td>
            <td class="cardsetCardQuantity" data-quantity="{{this.quantity}}">{{this.quantity}}</td>
        </tr>
    {{/unless}}
    {{#unless isActiveRoute regex="home|create|learn|pool|shuffle"}}
        {{#if hasAmount}}
            {{#unless canViewForFree}}
                <tr>
                    <td>{{_ "cardset.info.amount"}}:</td>
                    <td>{{getPrice this.price}}</td>
                </tr>
            {{/unless}}
        {{/if}}
        {{#if isPurchased}}
            <tr>
                <td>{{_ "cardset.info.bought"}}:</td>
                <td>{{getDateOfPurchase}}</td>
            </tr>
        {{/if}}
    {{/unless}}
    <tr>
        <td>{{_ "cardset.info.license"}}:</td>
        <td>
            {{#unless isShuffledCardset _id}}
                {{#if isActiveRoute "home"}}
                    <span class="info_license showLicense">{{getLicense this._id this.license}}</span>
                {{else}}
                    <a class="info_license showLicense" href="#" data-id="{{this._id}}" data-toggle="modal"
                       data-target="#showLicenseModal">{{getLicense this._id this.license}}</a>
                {{/if}}
            {{else}}
                {{_ "cardset.info.shuffleLicense"}}
            {{/unless}}
        </td>
    </tr>
</template>

<template name="cardsetInfoBoxContentTwo">
    <tr>
        <td>{{_ "cardset.info.release"}}:</td>
        <td>{{getMomentsDate this.date}}</td>
    </tr>
    <tr>
        <td>{{_ "cardset.info.dateUpdated"}}:</td>
        <td>{{getMomentsDate this.dateUpdated}}</td>
    </tr>
    {{#unless isActiveRoute regex="home|course"}}
        {{#if ratingEnabled}}
            <tr>
                <td>{{_ "cardset.info.rating"}}:</td>
                <td>
                    {{#if canRateCardset}}
                        {{#if isActiveRoute regex="cardsetdetailsid|cardsetlistid"}}
                            {{> starsRating id="rating" class='star-ratings' rating=getAverageRating mutable=true}}
                        {{else}}
                            {{> starsRating class='star-ratings' rating=getAverageRating mutable=false}}
                        {{/if}}

                    {{else}}
                        {{> starsRating class='star-ratings' rating=getAverageRating mutable=false}}
                    {{/if}} ({{this.raterCount}})
                </td>
            </tr>
            <tr>
                {{#if canRateCardset}}
                    <td>{{_ "cardset.info.userRating"}}:</td>
                    <td><span id="userRating">{{getUserRating}}</span></td>
                {{/if}}
            </tr>
        {{/if}}
    {{/unless}}
</template>

<template name="cardsetInfo">
    <div id="cardsetInfoDetail" class="col-md-12">
        <div class="panel panel-default cardsetInfo">
            <div class="panel-body">
                <div class="row markdeepCardset">
                    <div class="col-xs-12 {{#if
                            learningActive}}col-md-4{{else}}col-sm-6 col-md-8{{/if}} markdeepCardsetTitle">
                        <div class="cardsetLabels">{{{getKind kind 0}}} {{{getShuffleLabel
                                this.shuffled}}} {{{getBonusLabel this.learningActive}}}</div>
                        <h4 id="cardsetTitle">{{name}}</h4>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4 infoBox">
                    <span class="collapseCardsetInfoContainer">
                        {{> cardsetInfoBox}}
                    </span>
                    </div>
                    {{#if learningActive}}
                        <div class="col-xs-12 col-sm-6 col-md-4 infoBox">
                            {{> learningPhaseInfoBox}}
                        </div>
                    {{/if}}
                </div>
                <div class="row markdeepCardset markdeepCardsetContent">
                    <hr class="markdeepCardsetHeader">
                    {{#mathjax}}{{description}}{{/mathjax}}
                </div>
            </div>
            {{#if isLecturerAndHasRequest}}
                <div class="panel-footer">
                    <button id="acceptRequest" class="btn btn-raised btn-success"
                            type="button">{{_
                            "cardset.request.accept"}}</button>
                    <button id="declineRequest" class="btn btn-raised btn-danger"
                            type="button">{{_
                            "cardset.request.decline"}}</button>
                    <textarea id="declineRequestReason" type="text" class="form-control"
                              placeholder="{{_ "cardset.request.reason"}}" rows="7"></textarea>
                </div>
            {{/if}}

            <div class="cardsetInfoFooter panel-footer">
                {{#if hasCardsetPermission}}
                    {{#if learningActive}}
                        {{> leitnerLearning}}
                    {{/if}}
                    {{#unless learningActive}}
                        {{#if this.quantity}}
                            {{#if gotPresentation}}
                                <div class="btn-group">
                                    <button id="startPresentation"
                                            class="btn btn-sm btn-raised presentationBtn" {{disableIfOffline}}><i
                                            class="glyphicon glyphicon-blackboard"></i> {{_ "presentation.create"}}
                                    </button>
                                </div>
                            {{/if}}
                        {{/if}}
                        {{#if this.quantity}}
                            {{#if gotLearningModes}}
                                <div class="btn-group">
                                    <button type="button" class="btn btn-sm btn-raised learnBtn"
                                            data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false">
                                        <i class="fa fa-graduation-cap"></i> {{_ "learn"}} <span class="caret"></span>
                                    </button>
                                    <ul class="dropdown-menu">
                                        <li id="learnBox" class="leitnerList" {{disableIfOffline}}>{{_
                                                "learnfile"}}</li>
                                        <li id="learnMemo" class="wozniakList" {{disableIfOffline}}>{{_
                                                "memo"}}</li>
                                        {{#if learningLeitner}}
                                            <li id="leitnerProgress" class="progressList" {{disableIfOffline}}>{{_
                                                    "admin.myProgress"}}</li>
                                        {{/if}}
                                        {{#if learningLeitner}}
                                            <li id="resetLeitner" class="resetLeitnerList"
                                                data-toggle="modal"
                                                data-target="#resetLeitnerModal" {{disableIfOffline}}>{{_
                                                    "resetLearnfile"}}</li>
                                        {{/if}}
                                        {{#if learningMemo}}
                                            <li id="resetMemo" class="resetWozniakList"
                                                data-toggle="modal"
                                                data-target="#resetMemoModal" {{disableIfOffline}}>{{_
                                                    "resetWozniak"}}</li>
                                        {{/if}}
                                    </ul>
                                </div>
                            {{/if}}
                        {{/if}}
                        {{#if isCardsetOwner _id}}
                            {{#unless isShuffledCardset _id}}
                                <div class="hidden-xs btn-group">
                                    <a type="button" id="newCardBtn" class="btn btn-sm btn-raised newCardBtn"
                                       href="{{pathFor 'newCard'}}"
                                        {{disableIfOffline}}><i class="fa fa-plus"></i> {{_ "sidebar-nav.createcard"}}
                                    </a>
                                </div>
                                <div class="hidden-xs btn-group">
                                    <a href="#" id="importCardsBtn" class="btn btn-sm btn-raised importCardBtn"
                                       data-toggle="modal"
                                       data-target="#importModal"><i
                                            class="fa fa-cloud-upload"></i> {{_ "sidebar-nav.importcard"}}</a>
                                </div>
                            {{/unless}}
                        {{/if}}
                    {{/unless}}
                    {{#if isShuffledCardset this._id}}
                        {{#if isCardsetOwner _id}}
                            <div class="hidden-xs btn-group">
                                <button id="editShuffle" class="btn btn-sm btn-raised editShuffleBtn"
                                    {{disableIfOffline}}>
                                    <i class="fa fa-pencil"></i> {{_ "modal-dialog.editreferences"}}
                                </button>
                            </div>
                        {{/if}}
                    {{/if}}
                    {{#if isCardsetOwner _id}}
                        <div class="hidden-xs btn-group">
                            <button id="editCardset" class="btn btn-sm btn-raised eidtCardsetBtn"
                                    data-toggle="modal"
                                    data-target="#setCardsetFormModal" {{disableIfOffline}}>
                                <i class="fa fa-pencil"></i> {{_ "modal-dialog.editcard"}}
                            </button>
                        </div>
                    {{/if}}
                    {{#unless isShuffledCardset this._id}}
                        {{#if isCardsetOwner _id}}
                            <div class="hidden-xs btn-group">
                                <button id="selectLicense" class="btn btn-sm btn-raised selectLicenseBtn"
                                        data-toggle="modal"
                                        data-target="#selectLicenseModal" {{disableIfOffline}}>
                                    <i class="fa fa-cc"></i>{{_ "sidebar-nav.license"}}
                                </button>
                            </div>
                        {{/if}}
                    {{/unless}}
                    {{#unless isDisabled}}
                        {{#unless learningActive}}
                            {{#if isCardsetOwner _id}}
                                <div class="hidden-xs btn-group">
                                    <button id="publishCardset" class="btn btn-sm btn-raised publishCardsetBtn"
                                            data-toggle="modal"
                                            data-target="#publishModal" {{disableIfOffline}}>
                                        <i class="fa fa-eye"></i> {{getStatus}}
                                    </button>
                                </div>
                            {{/if}}
                        {{/unless}}
                    {{/unless}}
                    {{#if isCardsetOwner _id}}
                        {{#if isInRole 'admin, editor, lecturer'}}
                            <div class="hidden-xs btn-group">
                                <button class="btn btn-sm btn-raised bonusBtn" data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                    <i class="fa fa-graduation-cap"></i> {{_ "sidebar-nav.bonus"}} <span
                                        class="caret"></span>
                                </button>
                                <ul class="dropdown-menu">
                                    {{#if enableIfPublished}}
                                        {{#if gotLearningModes}}
                                            {{#if isCardsetOwner _id}}
                                                {{#if isInRole 'admin, editor, lecturer'}}
                                                    {{#unless learningActive}}
                                                        <li id="startBonus"
                                                            class="startLearn startLearningList"
                                                            data-toggle="modal"
                                                            data-target="#bonusFormModal">
                                                            {{_ "bonus.form.new.title"}}
                                                        </li>
                                                    {{/unless}}
                                                {{/if}}
                                            {{/if}}
                                            {{#if learningActiveAndEditor}}
                                                <li id="showStats" class="showStatsList">
                                                    {{_ "box_stats"}}
                                                </li>
                                            {{/if}}
                                        {{/if}}
                                        {{#if isCardsetOwner _id}}
                                            {{#if isInRole 'admin, editor, lecturer'}}
                                                {{#if learningActive}}
                                                    <li id="manageBonus"
                                                        class="manageLearn manageLearningList learnBoxActive"
                                                        data-toggle="modal"
                                                        data-target="#bonusFormModal">
                                                        {{_ "bonus.form.edit.title"}}
                                                    </li>
                                                    <li id="stopBonus"
                                                        class="stopLearn stopLearningList learnBoxActive"
                                                        data-toggle="modal"
                                                        data-target="#confirmEndLearnModal">
                                                        {{_ "sidebar-nav.stopLearning"}}
                                                    </li>
                                                {{/if}}
                                            {{/if}}
                                        {{/if}}
                                    {{/if}}
                                </ul>
                            </div>
                        {{/if}}
                    {{/if}}
                    {{#unless isCardsetOwner _id}}
                        <div class="hidden-xs btn-group">
                            <button class="btn btn-sm btn-raised manageBtn" data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-cog"></i> {{_ "manage"}} <span
                                    class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                {{#if enableIfPublished}}
                                    {{#unless isEditor}}
                                        <li id="report_button" class="reportList" data-toggle="modal"
                                            data-target="#reportModal">{{_
                                                "report"}}</li>
                                        {{#if learningActive}}
                                            <li id="leaveLearnPhaseButton" class="leaveLearnPhaseList"
                                                data-toggle="modal" data-target="#leaveModal">{{_
                                                    "confirm-leave-learnphase.btn-txt"}}</li>
                                        {{else}}
                                            {{#if learning}}
                                                <li id="leaveCardsetModalButton" class="leaveCardsetList"
                                                    data-toggle="modal" data-target="#leaveCardsetModal">{{_
                                                        "confirm-leave-cardset.btn-txt"}}</li>
                                            {{else}}
                                                <li id="leaveCardsetButton" class="leaveCardsetList">{{_
                                                        "confirm-leave-cardset.btn-txt"}}</li>
                                            {{/if}}
                                        {{/if}}
                                    {{/unless}}
                                    {{#if isEditor}}
                                        {{#unless isCardsetOwner _id}}
                                            <li id="leaveEditors" class="leaveEditorsList"
                                                data-toggle="modal" data-target="#leaveEditorsModal">{{_
                                                    "sidebar-nav.leaveEditors"}}</li>
                                        {{/unless}}
                                    {{/if}}
                                {{/if}}
                            </ul>
                        </div>
                    {{/unless}}
                    {{#unless learningActive}}
                        {{#unless isShuffledCardset this._id}}
                            {{#if this.quantity}}
                                {{#if isCardsetOwner _id}}
                                    <div class="hidden-xs btn-group">
                                        <button id="exportCardsBtn" class="btn btn-sm btn-raised exportCardsBtn"><i
                                                class="fa fa-cloud-download"></i> {{_ "sidebar-nav.exportcard"}}
                                        </button>
                                    </div>
                                    <div class="hidden-xs btn-group">
                                        <button id="delete_cards" class="btn btn-sm btn-raised deleteAllCardsBtn"
                                                data-toggle="modal"
                                                data-target="#deleteCardsModal" {{disableIfOffline}}>
                                            <i class="fa fa-trash"></i> {{_ "deleteCards"}}
                                        </button>
                                    </div>
                                {{/if}}
                            {{/if}}
                        {{/unless}}
                    {{/unless}}
                {{else}}
                    {{> cardsetPreview}}
                {{/if}}
            </div>
        </div>
    </div>
</template>

<template name="cardsetPreview">
    <div id="cardsetPreview">
        <div class="panel panel-default cardsetInfo">
            <div class="panel-body">
                    <span class="nav-header-cardset">{{_ "sidebar-nav.preview"}}<a id="showPreviewHelp" href="#"
                                                                                   class="field-tip">
                                        <i class="glyphicon glyphicon-info-sign"></i>
                                    </a></span>
                <form role="form">
                    <div class="">
                        <div class="">
                            <div id="payment-form"></div>
                            <button id="buyCardsetBtn" type="submit"
                                    class="btn btn-success btn-block btn-raised">{{_
                                    "cardset.money.buy"}} {{getPrice price}}
                            </button>
                        </div>
                    </div>
                </form>
                <button id="buyProBtn"
                        class="btn btn-warning btn-block btn-raised">{{_ "cardset.money.pro"}}
                </button>
            </div>
        </div>
    </div>
    <div class="btn-group"
         role="group">
    </div>
</template>

<template name="cardsetList">
    <div id="cardset-list">
        {{#if gotCards}}
            {{#each cardsetList}}
                {{#if isShuffledCardset this._id}}
                    <div class="cardListName btn-raised {{getColors}}">
                        {{this.name}}
                        {{#unless isActiveRoute regex='demo|demolist|making|makinglist'}}
                            <span class="cardListOwner hidden-xs">
                                {{getAuthorName this.owner}}
                            </span>
                        {{/unless}}
                    </div>
                {{/if}}
                {{#each cardSubject}}
                    <div class="cardListSubject">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>
                                    <span>{{this.subject}}</span>
                                    <span class="badge cardset-list-badge">{{cardList true}}</span>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            {{#each cardList false}}
                                <tr class="cardListRow">
                                    <td class="{{getCardsetBackground this.difficulty this.cardType 1}}"
                                        data-id="{{this._id}}" data-card-type="{{this.cardType}}">
                                        <div class="cardListNumber" data-id="{{this._id}}">
                                            {{getPriority @index}}
                                        </div>
                                        <div class="col-xs-11 listCard" data-id="{{this._id}}"
                                             data-card-type="{{this.cardType}}">
                                            {{cleanContent getText}}
                                        </div>
                                        <i class="glyphicon glyphicon-menu-right pull-right" data-id="{{this._id}}"
                                           data-card-type="{{this.cardType}}"></i>
                                    </td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                {{/each}}
            {{/each}}
        {{else}}
            <table class="table table-bordered table-hover">
                <tbody>
                <tr class="empty-listitem">
                    <td colspan="3" align="center">
                        <span>
                            {{#if isActiveRoute 'cardsetlistid'}}{{_ "nocards"}}{{else}}{{_
                                    "learningUnit.noUnitsFound"}}{{/if}}</span>
                    </td>
                </tr>
                </tbody>
            </table>
        {{/if}}
        {{> cardsetConfirmForm}}
    </div>
</template>

<template name="chooseFlashcards">
    <div class="modal fade" id="chooseFlashcardsModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="chooseFlashcardsTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <h4 id="chooseFlashcardsTitle" class="modal-title">{{#if isPresentationMode}}{{_
                            "presentation.create"}}{{else}}{{_ "learnSelection"}}{{/if}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="bs-callout bs-callout-info selectionInfo">
                        {{#if getCardCount -1 -1}}
                            <button id="createCardFilter" class="btn btn-raised btn-success" {{disableIfOffline}}>{{#if
                                    isPresentationMode}}{{_
                                    "presentation.start"}}{{else}}{{_ "filter-cards.filter"}}{{/if}}
                            </button>
                        {{/if}}
                        <a href="#" id="cancelCardFilter" class="btn btn-raised btn-danger" data-dismiss="modal"
                           aria-hidden="true">{{_
                                "declinecard"}}</a>
                        <span class="text">
                            {{_ "filter-cards.infoText"}} {{getCardCount -1 -1}}
                        </span>
                    </div>
                    <br>
                    <span class="col-xs-12 listHeader">
                        {{_ "filter-cards.settings"}}
                    </span>
                    <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                                            <span class="cell col-xs-6 poolText panelUnit">
                                                {{_ "filter-cards.sortText"}}
                                            </span>
                        <span class="cell col-xs-6 poolText panelUnit">
                                    <a class="btn btn-block btn-raised btn-default btn-sm shuffleButton sortFilter">{{getSortMode}}
                                    </a>
                        </span>
                    </div>
                    {{#if gotLearningGoal}}
                        <span class="col-xs-12 listHeader">
                            {{_ "learning-goal.name"}}
                        </span>
                        {{#if getCardCount 1 0}}
                            <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                                            <span class="cell col-xs-6 poolText panelUnit">
                                                {{_ "learning-goal.level1"}}
                                                <span class="cell badge cardsetBadge">
                                                    {{getCardCount 1 0}}
                                                </span>
                                            </span>
                                <span class="cell col-xs-6 poolText panelUnit">
                                    {{> chooseFlashcardsButton category=1 item=0}}
                                </span>
                            </div>
                        {{/if}}
                        {{#if getCardCount 1 1}}
                            <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level2"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 1}}
                        </span>
                    </span>
                                <span class="cell col-xs-6 poolText panelUnit">
                                    {{> chooseFlashcardsButton category=1 item=1}}
                                </span>
                            </div>
                        {{/if}}
                        {{#if getCardCount 1 2}}
                            <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level3"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 2}}
                        </span>
                    </span>
                                <span class="cell col-xs-6 poolText panelUnit">
                                    {{> chooseFlashcardsButton category=1 item=2}}
                                </span>
                            </div>
                        {{/if}}
                        {{#if getCardCount 1 3}}
                            <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level4"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 3}}
                        </span>
                    </span>
                                <span class="cell col-xs-6 poolText panelUnit">
                                    {{> chooseFlashcardsButton category=1 item=3}}
                                </span>
                            </div>
                        {{/if}}
                        {{#if getCardCount 1 4}}
                            <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level5"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 4}}
                        </span>
                    </span>
                                <span class="cell col-xs-6 poolText panelUnit">
                                    {{> chooseFlashcardsButton category=1 item=4}}
                                </span>
                            </div>
                        {{/if}}
                        {{#if getCardCount 1 5}}
                            <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level6"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 5}}
                        </span>
                    </span>
                                <span class="cell col-xs-6 poolText panelUnit">
                                    {{> chooseFlashcardsButton category=1 item=5}}
                                </span>
                            </div>
                        {{/if}}
                    {{/if}}
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="chooseFlashcardsButton">
    {{#if inFlashcardFilterSelection category item}}
        <a class="btn btn-block btn-raised btn-danger btn-sm shuffleButton removeCardFilter"
           data-category="{{category}}" data-item="{{item}}">
            <i class="fa fa-minus" data-category="{{category}}" data-item="{{item}}"></i> {{_
                "admin.cardset.removeFromWordcloud"}}
        </a>
    {{else}}
        <a class="btn btn-block btn-raised btn-success btn-sm shuffleButton addCardFilter"
           data-category="{{category}}" data-item="{{item}}">
            <i class="fa fa-plus" data-category="{{category}}" data-item="{{item}}"></i> {{_
                "admin.cardset.addToWordcloud"}}
        </a>
    {{/if}}
</template>

<template name="deleteCardsForm">
    <div class="modal fade" id="deleteCardsModal" tabindex="-1" role="dialog"
         aria-labelledby="deleteCardsTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <h4 id="deleteCardsTitle" class="modal-title">{{_ "deleteCards"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    {{_ "modal-dialog.deleteCards" name= this.name}}
                    <button id="deleteCardsConfirm" class="btn btn-raised btn-danger btn-block col-xs-12 col-sm-3">{{_
                            "deleteCards"}}</button>
                    <button id="deleteCardsCancel" class="btn btn-raised btn-default btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="resetLeitnerForm">
    <div class="modal fade" id="resetLeitnerModal" tabindex="-1" role="dialog"
         aria-labelledby="resetLeitnerTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <h4 id="resetLeitnerTitle" class="modal-title">{{_ "resetLearnfile"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    {{_ "modal-dialog.resetLeitner" name= this.name }}
                    <button id="resetLeitnerConfirm" class="btn btn-raised btn-danger btn-block col-xs-12 col-sm-3">{{_
                            "reset"}}</button>
                    <button id="resetLeitnerCancel" class="btn btn-raised btn-default btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="resetMemoForm">
    <div class="modal fade" id="resetMemoModal" tabindex="-1" role="dialog"
         aria-labelledby="resetMemoTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <h4 id="resetMemoTitle" class="modal-title">{{_ "resetWozniak"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    {{_ "modal-dialog.resetWozniak" name= this.name }}
                    <button id="resetMemoConfirm" class="btn btn-raised btn-danger btn-block col-xs-12 col-sm-3">{{_
                            "reset"}}</button>
                    <button id="resetMemoCancel" class="btn btn-raised btn-default btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="leaveLearnPhaseForm">
    <div class="modal fade" id="leaveModal" tabindex="-1" role="dialog" aria-labelledby="leaveLearnPhaseTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons xs-12">
                <div class="modal-header">
                    <h4 id="leaveLearnPhaseTitle" class="modal-title">{{_ "confirm-leave-learnphase.title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-leave-learnphase.text"}}</p>
                    <br>
                    <hr>
                    <button id="leaveLearnPhaseConfirm" class="btn btn-block btn-raised btn-default btn-danger">{{_
                            "confirm-leave-learnphase.btn-txt"}}</button>
                    <button id="leaveLearnPhaseCancel" class="btn btn-default btn-block btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="leaveCardsetForm">
    <div class="modal fade" id="leaveCardsetModal" tabindex="-1" role="dialog" aria-labelledby="leaveCardsetTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons xs-12">
                <div class="modal-header">
                    <h4 id="leaveCardsetTitle" class="modal-title">{{_ "confirm-leave-cardset.title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-leave-cardset.text"}}</p>
                    <br>
                    <hr>
                    <button id="leaveCardsetConfirm" class="btn btn-block btn-raised btn-default btn-danger">{{_
                            "confirm-leave-cardset.btn-txt"}}</button>
                    <button id="leaveCardsetCancel" class="btn btn-default btn-block btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="leaveEditorsForm">
    <div class="modal fade" id="leaveEditorsModal" tabindex="-1" role="dialog" aria-labelledby="leaveEditorsTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons xs-12">
                <div class="modal-header">
                    <h4 id="leaveEditorsTitle" class="modal-title">{{_ "confirm-leave-editors.title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-leave-editors.text" name= this.name}}</p>
                    <br>
                    <hr>
                    <button id="leaveEditorsConfirm" class="btn btn-block btn-raised btn-default btn-danger">{{_
                            "confirm-leave-editors.btn-txt"}}</button>
                    <button id="leaveEditorsCancel" class="btn btn-default btn-block btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="cardsetEndLearnForm">
    <div class="modal fade" id="confirmEndLearnModal" tabindex="-1" role="dialog"
         aria-labelledby="confirmEndLearnModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="confirmEndLearnModalTitle" class="modal-title">{{_ "confirmEndLearn-form.title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <h5>{{_ "confirmEndLearn-form.warnTitle"}}</h5>
                        <p>{{_ "confirmEndLearn-form.warning"}}</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="cancelEndLearn" class="btn btn-default btn-raised btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_ "confirmEndLearn-form.cancel"}}</button>
                    <button id="confirmEndLearn"
                            class="btn btn-danger btn-raised btn-block col-xs-12 col-sm-3 pull-right"
                            data-dismiss="modal">{{_ "confirmEndLearn-form.confirm"}}</button>
                </div>
            </div>
        </div>
    </div><!-- /form group -->
</template>

<template name="cardsetConfirmForm">
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="confirmModalTitle" class="modal-title">{{_ "confirm-form.title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-form.text"}}</p>
                    <br/>
                    <hr/>
                    {{#unless learningActive}}
                        <button id="cardDelete" class="btn btn-default btn-setDelete">{{_
                                "confirm-form.title"}}</button>
                    {{/unless}}
                    <button id="cardCancel" class="btn btn-default pull-right" data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="cardsetImportForm">
    <div class="modal fade" id="importModal" tabindex="-1" role="dialog" aria-labelledby="importModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="importModalTitle" class="modal-title">{{_ "upload-form.upload-title"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <div id="importTypeGroup" class="form-group btn-group" role="group" data-toggle="buttons">
                        <label id="importType1"
                               class="btn btn-default btn-white import-type {{#if importType 1}}active{{/if}}"
                               data-type="1">
                            {{#if importType 1}}
                                <input type="radio" id="tabFocus" name="cardType" value="1" checked
                                       data-type="1">
                            {{else}}
                                <input type="radio" name="cardType" value="1" data-type="1">
                            {{/if}}
                            {{_ "upload-form.upload-type1" lastAppTitle=(getLastAppTitle)}}
                        </label>
                        <label id="importType2"
                               class="btn btn-default btn-white import-type {{#if importType 2}}active{{/if}}"
                               data-type="2" data-toggle="modal"
                               data-target="#underDevelopmentModal">
                            {{#if importType 2}}
                                <input type="radio" id="tabFocus" name="cardType" value="2" checked
                                       data-type="2">
                            {{else}}
                                <input type="radio" name="cardType" value="2" data-type="2">
                            {{/if}}
                            {{_ "upload-form.upload-type2"}}
                        </label>
                    </div>
                    {{#if importType 1}}
                        <hr/>
                        <h4>{{_ "upload-form.upload-type"}}</h4>
                        <p>{{_ "upload-form.popover-content"}}</p>
                        <a role='button' target='_blank' class='btn btn-default'
                           href='/examples/example.json'>JSON</a>
                        <a role='button' target='_blank' class='btn btn-default'
                           href='/examples/example.csv.txt'>CSV</a>
                    {{/if}}
                    <hr/>
                </div>
                <div class="modal-footer">
                    {{#unless uploading}}
                        <button id="importCancel" class="btn btn-default btn-raised btn-block col-xs-12 col-sm-4"
                                data-dismiss="modal">{{_
                                "modal-dialog.cancel"}}</button>
                        <span class="btn btn-success btn-file btn-raised col-xs-12 col-sm-4 pull-right">
							{{_ "upload-form.select-file"}}<input type="file" name="uploadFile">
					  </span>
                    {{else}}
                        <p><i class="fa fa-spin fa-refresh"></i>{{_ "upload-form.wait"}}</p>
                    {{/unless}}
                    <br>
                    <br>
                    <div id="uploadError"></div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="cardsetPublishForm">
    <div class="modal fade" id="publishModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="confirmModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="confirmModalTitle" class="modal-title">{{_ "sidebar-nav.publish"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body row">
                    {{> publishKind}}
                </div>
                <div class="modal-footer">
                    <br>
                    <button id="cardsetCancel" class="btn btn-default btn-raised pull-left"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                    <button id="cardsetPublish"
                            class="btn btn-raised btn-success pull-right">{{_ "modal-dialog.publish"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="publishKind">
    <div class="form-group">
        <label class="col-md-3  control-label"
               for="newSetDescription">{{_ "set-list.availability"}}:</label>
        <div class="controls col-md-9">
            <div id="publishKind" class="btn-group-justified"
                 data-toggle="buttons">
                <label id="kindoption0"
                       class="btn btn-warning {{#if kindIsActive 'personal'}}active{{/if}}">
                    <input type="radio" name="kind" value="personal" id="kind_private">
                    <div>{{_ 'access-level.private.short'}}</div>
                </label>
                <label id="kindoption1"
                       class="btn btn-info {{#if kindIsActive 'free'}}active{{/if}}">
                    <input type="radio" name="kind" value="free" id="free">
                    <div>{{_ 'access-level.free.short'}}</div>
                </label>
                {{#if isInRole 'admin,editor,lecturer'}}
                    <label id="kindoption2"
                           class="btn btn-success {{#if kindIsActive 'edu'}}active{{/if}}">
                        <input type="radio" name="kind" value="edu" id="kind_edu">
                        <div>{{_ 'access-level.edu.short'}}</div>
                    </label>
                {{/if}}
                {{#if isInRole 'admin,editor,lecturer,pro'}}
                    <label id="kindoption3"
                           class="btn btn-danger {{#if kindIsActive 'pro'}}active{{/if}}">
                        <input type="radio" name="kind" value="pro" id="kind_pro">
                        <div>{{_ 'access-level.pro.short'}}</div>
                    </label>
                {{/if}}
            </div>
        </div>
    </div>
    {{#if kindWithPrice}}
        <div class="form-group">
            <label id="publishPriceLabel" class="col-md-3 control-label"
                   for="publishPrice">{{_ "modal-dialog.price"}} ()</label>
            <div class="col-md-9">
                <select id="publishPrice" class="form-control">
                    <option {{priceIsSelected 0.99}}>{{getPrice "0.99" false}}</option>
                    <option {{priceIsSelected 1.99}}>{{getPrice "1.99" false}}</option>
                    <option {{priceIsSelected 2.99}}>{{getPrice "2.99" false}}</option>
                    <option {{priceIsSelected 3.99}}>{{getPrice "3.99" false}}</option>
                    <option {{priceIsSelected 4.99}}>{{getPrice "4.99" false}}</option>
                    <option {{priceIsSelected 5.99}}>{{getPrice "5.99" false}}</option>
                    <option {{priceIsSelected 6.99}}>{{getPrice "6.99" false}}</option>
                    <option {{priceIsSelected 7.99}}>{{getPrice "7.99" false}}</option>
                    <option {{priceIsSelected 8.99}}>{{getPrice "8.99" false}}</option>
                    <option {{priceIsSelected 9.99}}>{{getPrice "9.99" false}}</option>
                </select>
            </div>
        </div>
    {{/if}}
</template>

<template name="cardsetManageEditors">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{#unless isCardsetOwner _id}}
                {{> access_denied_content_only}}
            {{else}}
                <div class="container">
                    <h3 class="modal-title">{{_ "modal-dialog.manageEditors" name = this.name}}</h3>
                    <div style="overflow-x:auto;">
                        <table class="table table-striped table-hover table-user-list">
                            <tbody>
                            <tr class="active">
                                <th>{{_ "panel-body.givenname"}}</th>
                                <th>{{_ "panel-body.birthname"}}</th>
                                <th>{{_ "panel-body.roles"}}</th>
                                <th></th>
                            </tr>
                            {{#each getEditors}}
                                <tr>
                                    <td>{{this.givenname}}</td>
                                    <td>{{this.birthname}}</td>
                                    <td> {{getRoles this.roles}}</td>
                                    <td>
                                        {{#if isCardsetEditor this.id}}
                                            <a class="btn btn-block btn-raised btn-danger removeEditor"
                                               data-id="{{this.id}}">
                                                <i class="fa fa-minus"></i> {{_ "admin.cardset.removeFromWordcloud"}}
                                            </a>
                                        {{else}}
                                            <a class="btn btn-block btn-raised btn-success addEditor"
                                               data-id="{{this.id}}">
                                                <i class="fa fa-plus"></i> {{_ "admin.cardset.addToWordcloud"}}
                                            </a>
                                        {{/if}}
                                    </td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-block btn-raised btn-danger" id="backButton">
                        <span class="pull-left">{{_ "backbutton"}}</span>
                    </button>
                </div>
            {{/unless}}
        {{/if}}
    {{/if}}
</template>

<template name="selectLicenseForm">
    <div class="modal fade" id="selectLicenseModal" tabindex="-1" role="dialog"
         aria-labelledby="selectLicenseModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="selectLicenseModalTitle" class="modal-title">{{_ "sidebar-nav.license"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label id="modulesLabel" class="col-md-3 control-label"
                                   for="newSetDescription">{{_ "modal-dialog.modules"}}</label>
                            <div class="controls col-md-9">
                                <div id="cc-modules" class="btn-group" data-toggle="buttons">
                                    <label id="cc-option0"
                                           class="btn btn-default {{#if licenseIsActive 'by'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="by" id="cc-by">
                                        <img src="/img/by.large.png" alt="Namensnennung"/>
                                    </label>
                                    <label id="cc-option1"
                                           class="btn btn-default {{#if licenseIsActive 'nc'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="nc" id="cc-nc">
                                        <img src="/img/nc-eu.large.png" alt="Nicht kommerziell"/>
                                    </label>
                                    <label id="cc-option2"
                                           class="btn btn-default {{#if licenseIsActive 'nd'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="nd" id="cc-nd">
                                        <img src="/img/nd.large.png" alt="Keine Bearbeitung"/>
                                    </label>
                                    <label id="cc-option3"
                                           class="btn btn-default {{#if licenseIsActive 'sa'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="sa" id="cc-sa">
                                        <img src="/img/sa.large.png" alt="Weitergabe unter gleichen Bedingungen"/>
                                    </label>
                                </div>
                                <span id="helpCC-modules" class="help-block cc-modules"></span>
                            </div>

                            <div id=cc-description class="col-md-12">
                                <hr>
                                <img class="col-md-2" src="/img/by.large.png" alt="Namensnennung"/>
                                <p class="col-md-10">{{_ "modal-dialog.by-desc"}}</p>
                                <img class="col-md-2" src="/img/nc-eu.large.png" alt="Nicht kommerziell"/>
                                <p class="col-md-10">{{_ "modal-dialog.nc-desc"}}</p>
                                <img class="col-md-2" src="/img/nd.large.png" alt="Keine Bearbeitung"/>
                                <p class="col-md-10">{{_ "modal-dialog.nd-desc"}}</p>
                                <img class="col-md-2" src="/img/sa.large.png"
                                     alt="Weitergabe unter gleichen Bedingungen"/>
                                <p class="col-md-10">{{_ "modal-dialog.sa-desc"}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="licenseCancel" class="btn btn-default btn-raised btn-block"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                    <button id="licenseSave" class="btn btn-success btn-raised btn-block pull-success pull-right">{{_
                            "modal-dialog.saveLicense"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="reportCardsetForm">
    <div class="modal fade" id="reportModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="reportModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="reportModalTitle" class="modal-title">{{_ "modal-dialog.report"}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "modal-dialog.cardsetowner"}}</label>
                            <p class="col-md-9">
                                {{getAuthorName this.owner}}
                            </p>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "modal-dialog.cardsetname"}}</label>
                            <p class="col-md-9">
                                {{name}}
                            </p>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "modal-dialog.reason"}}</label>
                            <div class="input-group">
                                <select id="reportCardsetReason" class="form-control">
                                    {{#unless userDeleted}}
                                        <option>{{_ "modal-dialog.reportuser"}}</option>
                                    {{/unless}}
                                    <option>{{_ "modal-dialog.reportcardset"}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group text">
                            <label id="reportCardsetTextLabel" class="col-md-3 control-label"
                                   for="reportCardsetText">{{_ "modal-dialog.text"}}</label>
                            <div class="col-md-9">
                                <textarea class="form-control" rows="6" id="reportCardsetText"></textarea>
                                <span id="helpReportCardsetText" class="help-block text"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="reportCardsetCancel" class="btn btn-default btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                    <button id="reportCardsetSave" class="btn btn-success btn-raised">{{_
                            "modal-dialog.submitcomplaint"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="leitnerLearning">
    {{#if notEmpty}}
        <button id="learnBoxActive"
                class="btn btn-sm btn-raised btn-success learn btn-learn">{{_
                "cardsToLearn"}}</button>
    {{/if}}
</template>

<template name="cardsetLearnActivityStatistic">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{#unless isEditor}}
                {{> access_denied_content_only}}
            {{else}}
                <div class="container">
                    <div id="cardsetInfoDetail">
                        <div class="panel panel-default cardsetInfo">
                            <div class="panel-body">
                                <h4>{{this.name}}</h4>
                                <hr>
                                <div class="row">
                                    <span class="col-sm-6 collapseCardsetInfoContainer">
                                        {{> cardsetInfoBox}}
                                    </span>
                                    <span class="col-sm-6 collapseCardsetInfoContainer">
                                        {{> learningPhaseInfoBox}}
                                    </span>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <button id="exportCSV" class="btn btn-success btn-raised btn-default">{{_
                                        "box_export"}}</button>
                            </div>
                        </div>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="table table-striped table-hover table-user-list">
                            <tbody>
                            <tr class="active">
                                <th>{{_ "panel-body.birthname"}}</th>
                                <th>{{_ "panel-body.givenname"}}</th>
                                <th>{{_ "panel-body.email"}}
                                    <a id="showIntervalHelp" href="#" class="field-tip pull-right">
                                        <i class="glyphicon glyphicon-info-sign"></i>
                                    </a>
                                </th>
                                <th>{{_ "leitnerProgress.box" number=1}} [{{this.learningInterval.[0]}}]
                                </th>
                                <th>{{_ "leitnerProgress.box" number=2}} [{{this.learningInterval.[1]}}]
                                </th>
                                <th>{{_ "leitnerProgress.box" number=3}} [{{this.learningInterval.[2]}}]
                                </th>
                                <th>{{_ "leitnerProgress.box" number=4}} [{{this.learningInterval.[3]}}]
                                </th>
                                <th>{{_ "leitnerProgress.box" number=5}} [{{this.learningInterval.[4]}}]
                                </th>
                                <th>{{_ "leitnerProgress.learned"}}</th>
                                <th>{{_ "details"}}</th>
                            </tr>
                            {{#each getCardsetStats}}
                                <tr>
                                    <td>{{this.birthname}}</td>
                                    <td>{{this.givenname}}</td>
                                    <td><a href="mailto:{{this.email}}">{{this.email}}</a></td>
                                    <td>{{this.box1}}</td>
                                    <td>{{this.box2}}</td>
                                    <td>{{this.box3}}</td>
                                    <td>{{this.box4}}</td>
                                    <td>{{this.box5}}</td>
                                    <td>
                                        {{#if earnedTrophy}}
                                            <span class="green-learning-text">
                                                {{this.box6}}
                                            </span>

                                            <i class="fa fa-trophy pull-right"></i>
                                        {{else}}
                                            <span class="red-learning-text">
                                                {{this.box6}}
                                            </span>
                                        {{/if}}
                                    </td>
                                    <td>
                                        <button data-id="{{this.user_id}}" class="btn btn-block detailed-stats"><i
                                                class="glyphicon glyphicon glyphicon-stats"
                                                data-id="{{this.user_id}}"></i></button>
                                    </td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-block btn-raised btn-danger" id="backButton">
                        <span class="pull-left">{{_ "backbutton"}}</span>
                    </button>
                </div>
            {{/unless}}
        {{/if}}
    {{/if}}
</template>

<template name="learningPhaseInfoBox">
    <a id="collapseLearningPhaseInfoButton" class="col-xs-12 card card-block collapseButton"
       href="#collapseLearningPhaseInfo" data-toggle="collapse">
        <strong>{{_ "set-list.learnphaseInfo"}}</strong>
        <i id="collapseLearningPhaseInfoIcon" class="glyphicon glyphicon-collapse-down pull-right"></i>
    </a>
    <div class="collapse" id="collapseLearningPhaseInfo">
        <div class="card card-block">
            <table class="table table-condensed table-striped table-hover infoBoxTable">
                <tbody>
                <tr>
                    <td>{{_ "set-list.learnphase"}}:</td>
                    <td>{{getLearningStatus}}</td>
                </tr>
                <tr>
                    <td>{{_ "set-list.bonusPoints"}}:</td>
                    <td>
                        <a href="https://www.thm.de/site/hochschule/zentrale-bereiche/pruefungsamt/faq.html#bonuspunkte-an-der-thm"
                           target="_blank">{{_ "set-list.bonusPointsPercentage"}}</a></td>
                </tr>
                <tr>
                    <td>{{_ "pool.activeLearners"}}:</td>
                    <td>{{this.learners}}</td>
                </tr>
                <tr>
                    <td>{{_ "bonus.form.maxWorkload.label"}}:</td>
                    <td>{{getWorkload}}</td>
                </tr>
                <tr>
                    <td>{{_ "bonus.form.daysBeforeReset.label"}}:</td>
                    <td>{{getDeadline}}</td>
                </tr>
                <tr>
                    <td>{{_ "bonus.form.startDate.label"}}:</td>
                    <td>{{getDateStart}}</td>
                </tr>
                <tr>
                    <td>{{_ "bonus.form.endDate.label"}}:</td>
                    <td>{{getDateEnd}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="showLicense">
    <div class="modal fade" id="showLicenseModal" tabindex="-1" role="dialog"
         aria-labelledby="showLicenseTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 id="showLicenseTitle" class="modal-title">{{_ "sidebar-nav.poolLicense"}} {{_ "set-list.topic"}}
                        : {{getTopic}}
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div id=cc-description class="col-md-12">
                                {{#if getLicenseCount}}
                                    {{#if getLicenseType 'by'}}
                                        <img class="col-md-2" src="/img/by.large.png" alt="Namensnennung"/>
                                        <p class="col-md-10">{{_ "modal-dialog.by-desc"}}</p>
                                    {{/if}}
                                    {{#if getLicenseType 'nc'}}
                                        <img class="col-md-2" src="/img/nc-eu.large.png" alt="Nicht kommerziell"/>
                                        <p class="col-md-10">{{_ "modal-dialog.nc-desc"}}</p>
                                    {{/if}}
                                    {{#if getLicenseType 'nd'}}
                                        <img class="col-md-2" src="/img/nd.large.png" alt="Keine Bearbeitung"/>
                                        <p class="col-md-10">{{_ "modal-dialog.nd-desc"}}</p>
                                    {{/if}}
                                    {{#if getLicenseType 'sa'}}
                                        <img class="col-md-2" src="/img/sa.large.png"
                                             alt="Weitergabe unter gleichen Bedingungen"/>
                                        <p class="col-md-10">{{_ "modal-dialog.sa-desc"}}</p>
                                    {{/if}}
                                {{else}}
                                    <img class="col-md-2" src="/img/zero.large.png" alt="Keine Lizenz"/>
                                    <p class="col-md-10">{{_ "modal-dialog.zero-desc"}}</p>
                                {{/if}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>
