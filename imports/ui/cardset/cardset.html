<template name="cardsetAccess">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{#if hasPermission}}
                {{#if learningActive}}
                    {{#if isProfileCompleted this._id}}
                        {{> cardset}}
                    {{else}}
                        {{> access_denied_profile_incomplete_content_only}}
                    {{/if}}
                {{else}}
                    {{> cardset}}
                {{/if}}
            {{else}}
                <div class="col-md-12">
                    <h4>{{_ "permission"}}</h4>
                </div>
            {{/if}}
        {{/if}}
    {{/if}}
</template>

<template name="cardset">
    {{#unless fullscreenActive}}
        {{> cardsetInfo}}
        {{> showLicense}}
        {{> cardsetCourseIterationForm}}
        {{> cardsetImportForm}}
        {{> cardsetPublishForm}}
        {{> cardsetStartLearnForm}}
        {{> cardsetEndLearnForm}}
        {{> selectLicenseForm}}
        {{> reportCardsetForm}}
        {{> deleteCardsForm}}
        {{> resetLeitnerForm}}
        {{> resetMemoForm}}
        {{> leaveLearnPhaseForm}}
        {{> leaveCardsetForm}}
        {{> leaveEditorsForm}}
        {{> chooseFlashcardsToLearn}}
        {{onEditmodalClose}}
    {{/unless}}
    {{#if hasCardsetPermission this._id}}
        {{#unless learningActiveAndEditor}}
            {{selectedForLearning}}
        {{/unless}}
        {{#unless fullscreenActive}}
            {{> cardsetSidebar}}
        {{/unless}}
        {{#if isActiveRoute 'cardsetdetailsid'}}
            {{#if learningActiveAndNotEditor}}
                {{> leitnerLearning}}
            {{else}}
                {{#if countCards this._id}}
                    {{> flashcards cardset=this}}
                {{else}}
                    {{#if isShuffledCardset}}
                        {{#if gotReferences}}
                            {{> flashcards cardset=this}}
                        {{else}}
                            {{> flashcardsEmpty}}
                        {{/if}}
                    {{else}}
                        {{> flashcardsEmpty}}
                    {{/if}}
                {{/if}}
            {{/if}}
        {{/if}}
        {{#if isActiveRoute 'cardsetlistid'}}
            {{> cardsetList}}
        {{/if}}
    {{else}}
        {{#unless fullscreenActive}}
            {{> cardsetPreview}}
        {{/unless}}
        {{#if countCards this._id}}
            {{> flashcards cardset=this}}
        {{else}}
            {{> flashcardsEmpty}}
        {{/if}}
    {{/if}}
</template>


<template name="cardsetInfoBox">
    <a id="collapseCardsetInfoButton"
       class="col-xs-12 card btn-default btn-raised {{getColors}} collapseButton collapsed" href="#collapseCardsetInfo"
       data-toggle="collapse">
        <strong>{{_ "set-list.cardsetInfo" type=getName}}</strong>
        <i id="collapseCardsetInfoIcon" class="glyphicon glyphicon-collapse-down pull-right"></i>
    </a>
    <div class="collapse" id="collapseCardsetInfo">
        <div class="card card-block">
            <table class="table table-condensed table-striped table-hover infoBoxTable">
                <tbody>
                <tr>
                    <td><strong>{{_ "cardType"}}:</strong></td>
                    <td>
                        {{getCardType}}
                    </td>
                </tr>
                <tr>
                    <td><strong>{{#if gotNotesForDifficultyLevel}}{{_ "difficultyNotes"}}{{else}}{{_ "difficulty"}}{{/if}}:</strong></td>
                    <td>
                        {{getDifficultyName}}
                    </td>
                </tr>
                <tr>
                    <td><strong>{{_ "courseIteration.name"}}:</strong></td>
                    <td>
                        {{_ "set-list.none"}}
                    </td>
                </tr>
                {{#if ratingEnabled}}
                    <tr>
                        <td><strong>{{_ "cardset.info.rating"}}:</strong></td>
                        <td>
                            {{#if isCardsetOwner _id}}
                                {{> starsRating id='ratingLocked' rating=getAverage mutable=false}}
                            {{else}}
                                {{> starsRating id='rating' rating=getAverage mutable=true}}
                            {{/if}} ({{this.raterCount}})
                        </td>
                    </tr>
                    <tr>
                        {{#unless isCardsetOwner _id}}
                            <td><strong>{{_ "cardset.info.userRating"}}:</strong></td>
                            <td><span id="userRating">{{getUserRating}}</span>{{#unless hasRated}}
                                ({{_ "cardset.info.notRated"}}){{/unless}}</td>
                        {{/unless}}
                    </tr>
                    <tr>
                        <td><strong>{{_ "cardset.info.quantity"}}:</strong></td>
                        <td>{{this.quantity}}</td>
                    </tr>
                {{/if}}
                <tr>
                    <td><strong id="license_strong">{{_ "cardset.info.license"}}:</strong></td>
                    <td>
                        {{#unless isShuffledCardset _id}}
                            <a id="info_license" href="#" data-id="{{_id}}" data-toggle="modal"
                               data-target="#showLicenseModal">{{getLicense}}</a>
                        {{else}}
                            {{_ "cardset.info.shuffleLicense"}}
                        {{/unless}}
                    </td>
                </tr>
                {{#if this.moduleActive}}
                    <tr>
                        <td><strong>{{_ "cardset.info.module"}}:</strong></td>
                        <td>
                            {{#if gotModuleLink}}
                                <a href="{{this.moduleLink}}" target="_blank">
                                    {{this.module}}
                                </a>
                            {{else}}
                                {{this.module}}
                            {{/if}}
                        </td>
                    </tr>
                    <tr>
                        <td><strong>{{_ "cardset.info.moduleShort"}}:</strong></td>
                        <td>
                            {{#if gotModuleLink}}
                                <a href="{{this.moduleLink}}" target="_blank">
                                    {{this.moduleToken}}
                                </a>
                            {{else}}
                                {{this.moduleToken}}
                            {{/if}}
                        </td>
                    </tr>
                    <tr>
                        <td><strong>{{_ "cardset.info.moduleNum"}}:</strong></td>
                        <td>
                            {{#if gotModuleLink}}
                                <a href="{{this.moduleLink}}" target="_blank">
                                    {{this.moduleNum}}
                                </a>
                            {{else}}
                                {{this.moduleNum}}
                            {{/if}}
                        </td>
                    </tr>
                    {{#unless singleUniversity}}
                        <tr>
                            <td><strong>{{_ "cardset.info.college"}}:</strong></td>
                            <td>{{this.college}}</td>
                        </tr>
                    {{/unless}}
                    <tr>
                        <td><strong>{{_ "cardset.info.course"}}:</strong></td>
                        <td>{{this.course}}</td>
                    </tr>
                {{/if}}
                <tr>
                    <td><strong>{{_ "cardset.info.author"}}:</strong></td>
                    <td>
                        {{#each getAuthors}}
                            <a href="{{pathFor 'profileSettings'
                                               _id=this._id}}">{{this.profile.givenname}} {{this.profile.birthname}} </a>
                        {{/each}}
                    </td>
                </tr>
                <tr>
                    <td><strong>{{_ "cardset.info.release"}}:</strong></td>
                    <td>{{getDate}}</td>
                </tr>
                <tr>
                    <td><strong>{{_ "cardset.info.dateUpdated"}}:</strong></td>
                    <td>{{getDateUpdated}}</td>
                </tr>
                {{#if getReviewer}}
                    <tr>
                        <td><strong>{{_ "cardset.info.reviewer"}}:</strong></td>
                        <td><a
                                href="{{pathFor 'profileSettings' _id=reviewer}}">{{getAuthorName this.reviewer}}</a>
                        </td>
                    </tr>
                {{/if}}
                {{#if hasAmount}}
                    {{#unless canViewForFree}}
                        <tr>
                            <td><strong>{{_ "cardset.info.amount"}}:</strong></td>
                            <td>{{getPrice this.price}}</td>
                        </tr>
                    {{/unless}}
                {{/if}}
                {{#if isPurchased}}
                    <tr>
                        <td><strong>{{_ "cardset.info.bought"}}:</strong></td>
                        <td>{{getDateOfPurchase}}</td>
                    </tr>
                {{/if}}
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="cardsetInfo">
    <div id="cardsetInfoDetail" class="col-md-12">
        <div class="panel panel-default cardsetInfo">
            <div class="panel-body">
                <div class="row">
                    <div class="col-sm-6 col-md-8">
                        <div class="">
                            <h4 id="cardsetTitle">{{{getKind}}} {{name}}</h4>
                            <hr> {{#markdown}}{{description}}{{/markdown}}
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-4 infoBox">
                    <span class="collapseCardsetInfoContainer">
                        {{> cardsetInfoBox}}
                    </span>
                        {{#if learningActive}}
                            {{> learningPhaseInfoBox}}
                        {{/if}}
                    </div>
                </div>
            </div>
            {{#if isLecturerAndHasRequest}}
                <div class="panel-footer">
                    <button id="acceptRequest" class="btn btn-raised btn-success"
                            type="button">{{_
                            "cardset.request.accept"}}</button>
                    <button id="declineRequest" class="btn btn-raised btn-danger"
                            type="button">{{_
                            "cardset.request.decline"}}</button>
                    <textarea id="declineRequestReason" type="text" class="form-control"
                              placeholder="{{_ "cardset.request.reason"}}" rows="7"></textarea>
                </div>
            {{/if}}
            {{#if isCardsetOwner _id}}
                <div class="panel-footer">
                    {{#unless learningActive}}
                        {{#unless isShuffledCardset _id}}
                            <div class="btn-group btn-group-raised">
                                <a type="button" id="newCardBtn" class="btn btn-raised btn-success"
                                   href="{{pathFor 'newCard'}}"
                                    {{disableIfOffline}}>
                                    <i class="fa fa-plus"></i> {{_ "sidebar-nav.createcard"}}
                                </a>
                            </div>
                            <div class="btn-group btn-group-raised">
                                <a href="#" id="importCardsBtn" class="btn btn-raised btn-default" data-toggle="modal"
                                   data-target="#importModal"><i
                                        class="fa fa-cloud-upload"></i> {{_ "sidebar-nav.importcard"}}</a>
                            </div>
                        {{/unless}}
                    {{/unless}}
                    {{#unless isDisabled}}
                        {{#if isShuffledCardset this._id}}
                            <div class="btn-group btn-group-raised">
                                <button id="editShuffle" class="btn btn-raised btn-default"
                                        type="button" {{disableIfOffline}}>
                                    <i class="fa fa-pencil"></i> {{_ "modal-dialog.editreferences"}}
                                </button>
                            </div>
                        {{/if}}
                    {{/unless}}
                    <div class="btn-group btn-group-raised">
                        <button id="editCardset" class="btn btn-raised btn-default" type="button"
                                data-toggle="modal"
                                data-target="#setCardsetCourseIterationFormModal" {{disableIfOffline}}>
                            <i class="fa fa-pencil"></i> {{_ "modal-dialog.editcard"}}
                        </button>
                    </div>
                    {{#unless isShuffledCardset this._id}}
                        {{#if isPublished}}
                            <button id="selectLicense" class="btn btn-default btn-raised" type="button"
                                    data-toggle="modal"
                                    data-target="#selectLicenseModal" {{disableIfOffline}}>
                                <i class="fa fa-cc"></i>{{_ "sidebar-nav.license"}}
                            </button>
                        {{/if}}
                    {{/unless}}
                    {{#unless isDisabled}}
                        {{#unless learningActive}}
                            <div class="btn-group btn-group-raised">
                                <button id="publishCardset" class="btn btn-default" type="button"
                                        data-toggle="modal"
                                        data-target="#publishModal" {{disableIfOffline}}>
                                    <i class="fa fa-eye"></i> {{getStatus}}
                                </button>
                                <button id="publishTooltip" type="button" class="btn btn-default"
                                        data-toggle="tooltip"
                                        title="{{_ "sidebar-nav.tooltip"}}">
                                    <i class="fa fa-question"></i></button>
                            </div>
                        {{/unless}}
                    {{/unless}}
                    {{#unless learningActive}}
                        {{#unless isShuffledCardset this._id}}
                            <div class="btn-group btn-group-raised">
                                <a href="#" id="exportCardsBtn" class="btn btn-raised btn-default"><i
                                        class="fa fa-cloud-download"></i> {{_ "sidebar-nav.exportcard"}}</a>
                            </div>
                            {{#if this.quantity}}
                                <div class="btn-group btn-group-raised deleteCardsButton pull-right">
                                    <button id="delete_cards" class="btn btn-raised btn-danger" type="button"
                                            data-toggle="modal"
                                            data-target="#deleteCardsModal" {{disableIfOffline}}>
                                        <i class="fa fa-trash"></i> {{_ "deleteCards"}}
                                    </button>
                                </div>
                            {{/if}}
                        {{/unless}}
                    {{/unless}}
                </div>
            {{/if}}
        </div>
    </div>
</template>

<template name="cardsetSidebar">
    <div id="sidebar" class="col-md-3">
        {{#unless learningActiveAndNotEditor}}
            <div id="set-details-sideBar-region col-xs-12">
                <div class="well well-sm sidebar-nav">
                    <span class="nav-header-cardset">{{_ "sidebar-nav.view"}}</span>
                    <div class="btn-group btn-group-raised btn-group-justified">
                        <a id="btnToCardLayout"
                           class="btn btn-default btn-cardLayout {{#if isActiveRoute 'cardsetdetailsid'}}active{{/if}}"
                           href="/cardset/{{_id}}"><img class="cardDetailsIcon" src="/img/card_detail_icon.png"> {{_
                                "sidebar-nav.viewmap"}}</a>
                        <a id="btnToListLayout"
                           class="btn btn-default btn-listLayout {{#if isActiveRoute 'cardsetlistid'}}active{{/if}}"
                           href="/cardsetlist/{{_id}}"><i class="fa fa-list"></i> {{_ "sidebar-nav.viewlist"}}</a>
                    </div>
                </div>
            </div>
        {{/unless}}
        {{#if gotLearningModes}}
            {{#if gotEnoughCards}}
                {{#unless learningActive}}
                    <div id="set-details-learn-region">
                        <div class="well well-sm sidebar-nav">
                        <span class="nav-header-cardset">{{_ "learn"}}<a href="\learning" id="showHintLearning">
                                                    <span class="glyphicon glyphicon-info-sign"></span>
                                                        </a></span>

                            {{#if isProfileCompleted this._id}}
                                <button id="learnBox"
                                        class="btn btn-raised btn-success learn btn-block" {{disableIfOffline}}>{{_
                                        "learnfile"}}</button>
                            {{else}}
                                <button class="btn btn-raised btn-success learn btn-block" {{disableIfOffline}}
                                        data-toggle="modal" data-target="#completeProfileModal">{{_
                                        "learnfile"}}</button>
                            {{/if}}
                            <button id="learnMemo"
                                    class="btn btn-raised btn-success memo btn-block" {{disableIfOffline}}>{{_
                                    "memo"}}</button>
                            <button id="learnChoice"
                                    class="btn btn-raised btn-success choice btn-block" {{disableIfOffline}}
                                    data-toggle="modal" data-target="#chooseFlashcardsModal">{{_
                                    "learnSelection"}}</button>
                            {{#if learningLeitner}}
                                <button id="leitnerProgress"
                                        class="btn btn-raised btn-default btn-block" {{disableIfOffline}}>{{_
                                        "leitnerProgress"}}</button>
                            {{/if}}
                        </div>
                    </div>
                {{else}}
                    {{#if learningLeitner}}
                        <div id="set-details-learn-region">
                            <div class="well well-sm sidebar-nav">
                                <span class="nav-header-cardset">{{_ "learn"}}</span>
                                <button id="leitnerProgress"
                                        class="btn btn-raised btn-success btn-block" {{disableIfOffline}}>{{_
                                        "leitnerProgress"}}</button>
                            </div>
                        </div>
                    {{/if}}
                {{/unless}}
            {{/if}}
        {{/if}}
        <div id="set-details-learn-region">
            <a id="collapseManageButton" class="col-xs-12 card card-block collapseButton collapsed"
               href="#collapseManage" data-toggle="collapse">
                <strong>{{_ "manage"}}<a href="#" id="showHintManage">
                    <span class="glyphicon glyphicon-info-sign"></span>
                </a></strong>
                <i id="collapseMangeIcon" class="glyphicon glyphicon-collapse-down pull-right"></i>
            </a>
            <div id="collapseManage" class="collapse well well-sm">
                {{#if isCardsetOwner _id}}
                    <button id="manageEditors" type="button"
                            class="btn btn-default btn-raised btn-block btn-default"
                        {{disableIfOffline}}>
                        {{_ "sidebar-nav.manageEditors"}}
                    </button>
                {{/if}}
                {{#unless learningActive}}
                    {{#if learningLeitner}}
                        <button id="resetLeitner"
                                class="btn btn-raised btn-default btn-block btn-danger flag" href="#"
                                data-toggle="modal"
                                data-target="#resetLeitnerModal" {{disableIfOffline}}>{{_
                                "resetLearnfile"}}</button>
                    {{/if}}
                    {{#if learningMemo}}
                        <button id="resetMemo"
                                class="btn btn-raised btn-default btn-block btn-danger flag" href="#"
                                data-toggle="modal"
                                data-target="#resetMemoModal" {{disableIfOffline}}>{{_
                                "resetWozniak"}}</button>
                    {{/if}}
                {{/unless}}
                {{#if enableIfPublished}}
                    {{#if gotLearningModes}}
                        {{#if isCardsetOwner _id}}
                            {{#if isInRole 'lecturer'}}
                                <button id="startStopLearning"
                                        class="btn btn-default btn-raised startStopLearn btn-block {{#if
                                                learningActive}} btn-danger learnBoxActive {{else}} btn-success {{/if}}"
                                        type="button"
                                        data-toggle="modal"
                                        data-target="{{#unless
                                                learningActive}}#confirmLearnModal{{else}}#confirmEndLearnModal{{/unless}}">
                                    {{#if learningActive}}
                                        {{_ "sidebar-nav.stopLearning"}}
                                    {{else}}
                                        {{_ "sidebar-nav.startLearning"}}
                                    {{/if}}
                                </button>
                            {{/if}}
                        {{/if}}
                        {{#if learningActiveAndEditor}}
                            <button id="showStats" class="btn btn-default btn-raised btn-block btn-default">
                                {{_ "box_stats"}}
                            </button>
                        {{/if}}
                    {{/if}}
                    {{#unless isEditor}}
                        <button id="report_button"
                                style="white-space: normal; padding-left: 10px; padding-right: 10px;"
                                class="btn btn-raised btn-default btn-block btn-warning flag" href="#"
                                data-toggle="modal" data-target="#reportModal">{{_
                                "report"}}</button>
                        {{#if learningActive}}
                            <button id="leaveLearnPhaseButton"
                                    style="white-space: normal; padding-left: 10px; padding-right: 10px;"
                                    class="btn btn-raised btn-default btn-block btn-danger flag" href="#"
                                    data-toggle="modal" data-target="#leaveModal">{{_
                                    "confirm-leave-learnphase.btn-txt"}}</button>
                        {{else}}
                            {{#if learning}}
                                <button id="leaveCardsetModalButton"
                                        style="white-space: normal; padding-left: 10px; padding-right: 10px;"
                                        class="btn btn-raised btn-default btn-block btn-danger flag" href="#"
                                        data-toggle="modal" data-target="#leaveCardsetModal">{{_
                                        "confirm-leave-cardset.btn-txt"}}</button>
                            {{else}}
                                <button id="leaveCardsetButton"
                                        style="white-space: normal; padding-left: 10px; padding-right: 10px;"
                                        class="btn btn-raised btn-default btn-block btn-danger flag" href="#">{{_
                                        "confirm-leave-cardset.btn-txt"}}</button>
                            {{/if}}
                        {{/if}}
                    {{/unless}}
                    {{#if isEditor}}
                        {{#unless isCardsetOwner _id}}
                            <button id="leaveEditors"
                                    style="white-space: normal; padding-left: 10px; padding-right: 10px;"
                                    class="btn btn-raised btn-default btn-block btn-danger flag" href="#"
                                    data-toggle="modal" data-target="#leaveEditorsModal">{{_
                                    "sidebar-nav.leaveEditors"}}</button>
                        {{/unless}}
                    {{/if}}
                {{/if}}
            </div>
        </div>
    </div>
</template>


<template name="cardsetPreview">
    <div class="col-md-3">
        <div id="cardsetPreview">
            <div class="panel panel-default cardsetInfo">
                <div class="panel-body">
                    <span class="nav-header-cardset">{{_ "sidebar-nav.preview"}}<a id="showPreviewHelp" href="#"
                                                                                   class="field-tip">
                                        <i class="glyphicon glyphicon-info-sign"></i>
                                    </a></span>
                    <form role="form">
                        <div class="">
                            <div class="">
                                <div id="payment-form"></div>
                                <button id="buyCardsetBtn" type="submit"
                                        class="btn btn-success btn-block btn-raised">{{_
                                        "cardset.money.buy"}} {{getPrice price}}
                                </button>
                            </div>
                        </div>
                    </form>
                    <button id="buyProBtn"
                            class="btn btn-warning btn-block btn-raised">{{_ "cardset.money.pro"}}
                    </button>
                </div>
            </div>
        </div>
        <div class="btn-group"
             role="group">
        </div>
    </div>
</template>

<template name="cardsetList">
    <div class="{{#if isActiveRoute 'cardsetlistid'}}col-md-9{{/if}}" id="cardset-list">
        {{#if gotCards}}
            {{#each cardsetList}}
                {{#if isShuffledCardset}}
                    <div class="cardListName btn-raised {{getColors}}">
                        {{this.name}}
                    </div>
                {{/if}}
                {{#each cardSubject}}
                    <div class="cardListSubject">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th>
                                    <span>{{this.subject}}</span>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            {{#each cardList}}
                                <tr>
                                    <td class="{{getCardBackground this.difficulty this.cardType 1}} cardListRow"
                                        data-id="{{this._id}}">
                                        <div class="col-xs-11 listCard" data-id="{{this._id}}">{{this.front}}</div>
                                        <i class="glyphicon glyphicon-menu-right pull-right" data-id="{{this._id}}"></i>
                                    </td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                {{/each}}
            {{/each}}
        {{else}}
            <table class="table table-bordered table-hover">
                <tbody>
                <tr class="empty-listitem">
                    <td colspan="3" align="center">
                        <span style="font-family:'Georgia'">
                            {{#if isActiveRoute 'cardsetlistid'}}{{_ "nocards"}}{{else}}{{_
                                    "learningUnit.noUnitsFound"}}{{/if}}</span>
                    </td>
                </tr>
                </tbody>
            </table>
        {{/if}}
        {{> cardsetConfirmForm}}
    </div>
</template>

<template name="chooseFlashcardsToLearn">
    <div class="modal fade" id="chooseFlashcardsModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="chooseFlashcardsTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="chooseFlashcardsTitle" class="modal-title">{{_ "learnSelection"}}</h4>
                </div>
                <div class="modal-body">
                    <div class="bs-callout bs-callout-info selectionInfo">
                        {{#if getCardCount -1 -1}}
                            <a href="#" id="createCardFilter" class="btn btn-raised btn-success"
                               role="button" {{disableIfOffline}}>{{_ "filter-cards.filter"}}
                            </a>
                        {{/if}}
                        <a href="#" id="cancelCardFilter" class="btn btn-raised btn-danger" data-dismiss="modal"
                           aria-hidden="true">{{_
                                "declinecard"}}</a>
                        <span class="text">
                            {{_ "filter-cards.infoText"}} {{getCardCount -1 -1}}
                        </span>
                    </div>
                    <br>
                    <span class="col-xs-12 poolHeaderBottom">
                        {{_ "filter-cards.settings"}}
                    </span>
                    <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                                            <span class="cell col-xs-6 poolText panelUnit">
                                                {{_ "filter-cards.sortText"}}
                                            </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                                    <a class="btn btn-block btn-raised btn-default btn-sm shuffleButton sortFilter">{{getSortMode}}
                                    </a>
                        </span>
                    </div>
                    <span class="col-xs-12 poolHeaderBottom">
                        {{_ "difficulty"}}
                    </span>
                    <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                                            <span class="cell col-xs-6 poolText panelUnit">
                                                {{_ "difficultyNotes0"}}
                                                <span class="cell badge cardsetBadge">
                                                    {{getCardCount 0 0}}
                                                </span>
                                            </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=0 item=0}}
                        </span>
                    </div>
                    <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "difficulty1"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 0 1}}
                        </span>
                    </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=0 item=1}}
                        </span>
                    </div>
                    <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "difficulty2"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 0 2}}
                        </span>
                    </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=0 item=2}}
                        </span>
                    </div>
                    <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "difficulty3"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 0 3}}
                        </span>
                    </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=0 item=3}}
                        </span>
                    </div>
                    <span class="col-xs-12 poolHeaderBottom">
                        {{_ "cardType"}}
                    </span>
                    <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                                            <span class="cell col-xs-6 poolText panelUnit">
                                                {{_ "card.cardType0.name"}}
                                                <span class="cell badge cardsetBadge">
                                                    {{getCardCount 1 0}}
                                                </span>
                                            </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=1 item=0}}
                        </span>
                    </div>
                    <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "card.cardType1.name"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 1}}
                        </span>
                    </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=1 item=1}}
                        </span>
                    </div>
                    <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "card.cardType2.name"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 2}}
                        </span>
                    </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=1 item=2}}
                        </span>
                    </div>
                    <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "card.cardType3.name"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 3}}
                        </span>
                    </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=1 item=3}}
                        </span>
                    </div>
                    <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "card.cardType4.name"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 1 4}}
                        </span>
                    </span>
                        <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                            {{> chooseFlashcardsToLearnButton category=1 item=4}}
                        </span>
                    </div>
                    {{#if gotLearningGoalType}}
                        <span class="col-xs-12 poolHeaderBottom">
                            {{_ "learning-goal.name"}}
                        </span>
                        <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                                            <span class="cell col-xs-6 poolText panelUnit">
                                                {{_ "learning-goal.level1"}}
                                                <span class="cell badge cardsetBadge">
                                                    {{getCardCount 2 0}}
                                                </span>
                                            </span>
                            <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                                {{> chooseFlashcardsToLearnButton category=2 item=0}}
                            </span>
                        </div>
                        <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level2"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 2 1}}
                        </span>
                    </span>
                            <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                                {{> chooseFlashcardsToLearnButton category=2 item=1}}
                            </span>
                        </div>
                        <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level3"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 2 2}}
                        </span>
                    </span>
                            <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                                {{> chooseFlashcardsToLearnButton category=2 item=2}}
                            </span>
                        </div>
                        <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level4"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 2 3}}
                        </span>
                    </span>
                            <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                                {{> chooseFlashcardsToLearnButton category=2 item=3}}
                            </span>
                        </div>
                        <div class="col-xs-12 panel panel-default cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level5"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 2 4}}
                        </span>
                    </span>
                            <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                                {{> chooseFlashcardsToLearnButton category=2 item=4}}
                            </span>
                        </div>
                        <div class="col-xs-12 panel panel-default altPanel cardsetInfo cardsetRow responsive-utilities-test visible-on">
                    <span class="cell col-xs-6 poolText panelUnit">
                        {{_ "learning-goal.level6"}}
                        <span class="cell badge cardsetBadge">
                            {{getCardCount 2 5}}
                        </span>
                    </span>
                            <span class="cell col-xs-6 poolText panelUnit panelUnitNoBorder">
                                {{> chooseFlashcardsToLearnButton category=2 item=5}}
                            </span>
                        </div>
                    {{/if}}
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="chooseFlashcardsToLearnButton">
    {{#if inFlashcardFilterSelection category item}}
        <a class="btn btn-block btn-raised btn-danger btn-sm shuffleButton removeCardFilter"
           data-category="{{category}}" data-item="{{item}}">
            <i class="fa fa-minus" data-category="{{category}}" data-item="{{item}}"></i> {{_
                "admin.cardset.removeFromWordcloud"}}
        </a>
    {{else}}
        <a class="btn btn-block btn-raised btn-success btn-sm shuffleButton addCardFilter"
           data-category="{{category}}" data-item="{{item}}">
            <i class="fa fa-plus" data-category="{{category}}" data-item="{{item}}"></i> {{_
                "admin.cardset.addToWordcloud"}}
        </a>
    {{/if}}
</template>

<template name="deleteCardsForm">
    <div class="modal fade" id="deleteCardsModal" tabindex="-1" role="dialog"
         aria-labelledby="deleteCardsTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="deleteCardsTitle" class="modal-title">{{_ "deleteCards"}}</h4>
                </div>
                <div class="modal-body">
                    {{_ "modal-dialog.deleteCards" name= this.description }}
                    <button id="deleteCardsConfirm" class="btn btn-raised btn-danger btn-block col-xs-12 col-sm-3">{{_
                            "deleteCards"}}</button>
                    <button id="deleteCardsCancel" class="btn btn-raised btn-default btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="resetLeitnerForm">
    <div class="modal fade" id="resetLeitnerModal" tabindex="-1" role="dialog"
         aria-labelledby="resetLeitnerTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="resetLeitnerTitle" class="modal-title">{{_ "resetLearnfile"}}</h4>
                </div>
                <div class="modal-body">
                    {{_ "modal-dialog.resetLeitner" name= this.name }}
                    <button id="resetLeitnerConfirm" class="btn btn-raised btn-danger btn-block col-xs-12 col-sm-3">{{_
                            "reset"}}</button>
                    <button id="resetLeitnerCancel" class="btn btn-raised btn-default btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="resetMemoForm">
    <div class="modal fade" id="resetMemoModal" tabindex="-1" role="dialog"
         aria-labelledby="resetMemoTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="resetMemoTitle" class="modal-title">{{_ "resetWozniak"}}</h4>
                </div>
                <div class="modal-body">
                    {{_ "modal-dialog.resetWozniak" name= this.name }}
                    <button id="resetMemoConfirm" class="btn btn-raised btn-danger btn-block col-xs-12 col-sm-3">{{_
                            "reset"}}</button>
                    <button id="resetMemoCancel" class="btn btn-raised btn-default btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="leaveLearnPhaseForm">
    <div class="modal fade" id="leaveModal" tabindex="-1" role="dialog" aria-labelledby="leaveLearnPhaseTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons xs-12">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="modal-header">
                    <h4 id="leaveLearnPhaseTitle" class="modal-title">{{_ "confirm-leave-learnphase.title"}}</h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-leave-learnphase.text"}}</p>
                    <br>
                    <hr>
                    <button id="leaveLearnPhaseConfirm" class="btn btn-block btn-raised btn-default btn-danger">{{_
                            "confirm-leave-learnphase.btn-txt"}}</button>
                    <button id="leaveLearnPhaseCancel" class="btn btn-default btn-block btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="leaveCardsetForm">
    <div class="modal fade" id="leaveCardsetModal" tabindex="-1" role="dialog" aria-labelledby="leaveCardsetTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons xs-12">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="modal-header">
                    <h4 id="leaveCardsetTitle" class="modal-title">{{_ "confirm-leave-cardset.title"}}</h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-leave-cardset.text"}}</p>
                    <br>
                    <hr>
                    <button id="leaveCardsetConfirm" class="btn btn-block btn-raised btn-default btn-danger">{{_
                            "confirm-leave-cardset.btn-txt"}}</button>
                    <button id="leaveCardsetCancel" class="btn btn-default btn-block btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="leaveEditorsForm">
    <div class="modal fade" id="leaveEditorsModal" tabindex="-1" role="dialog" aria-labelledby="leaveEditorsTitle">
        <div class="modal-dialog">
            <div class="modal-content modal-content-for-buttons xs-12">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <div class="modal-header">
                    <h4 id="leaveEditorsTitle" class="modal-title">{{_ "confirm-leave-editors.title"}}</h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-leave-editors.text" name= this.name}}</p>
                    <br>
                    <hr>
                    <button id="leaveEditorsConfirm" class="btn btn-block btn-raised btn-default btn-danger">{{_
                            "confirm-leave-editors.btn-txt"}}</button>
                    <button id="leaveEditorsCancel" class="btn btn-default btn-block btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="cardsetStartLearnForm">
    <div class="modal fade" id="confirmLearnModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="confirmLearnModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="confirmLearnModalTitle" class="modal-title">{{_ "confirmLearn-form.title"}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "confirmLearn-form.maxCards"}}</label>
                            <div class="col-md-9">
                                <input type="number" min="1" max="100" data-bind="value:replyNumber"
                                       onkeypress="return  (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                       class="form-control" id="inputMaxCards"
                                       placeholder="{{_ "confirmLearn-form.maxCardsDesc"}}" value="">
                                <span id="errorMaxCards" class="help-block name"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "confirmLearn-form.daysBeforeReset"}}</label>
                            <div class="col-md-9">
                                <input type="number" min="1" max="100" data-bind="value:replyNumber"
                                       onkeypress="return  (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                       class="form-control" id="inputDaysBeforeReset"
                                       placeholder="{{_ "confirmLearn-form.daysBeforeResetDesc"}}" value="">
                                <span id="errorDaysBeforeReset" class="help-block name"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "confirmLearn-form.learningStart"}}</label>
                            <div class="col-md-9">
                                <input type="date" class="form-control" id="inputLearningStart"
                                       placeholder="{{_ "confirmLearn-form.learningStartDesc"}}" value="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "confirmLearn-form.learningEnd"}}</label>
                            <div class="col-md-9">
                                <input type="date" class="form-control" id="inputLearningEnd"
                                       placeholder="{{_ "confirmLearn-form.learningEndDesc"}}" value="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "confirmLearn-form.learningInterval"}}</label>
                            <div class="col-md-9 form-inline">
                                <input type="number" min="1" max="999" data-bind="value:replyNumber"
                                       onkeypress="return  (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                       class="form-control interval" id="inputLearningInterval1"
                                       placeholder="1" value="1">
                                <input type="number" min="1" max="999" data-bind="value:replyNumber"
                                       onkeypress="return  (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                       class="form-control interval" id="inputLearningInterval2"
                                       placeholder="3" value="3">
                                <input type="number" min="1" max="999" data-bind="value:replyNumber"
                                       onkeypress="return  (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                       class="form-control interval" id="inputLearningInterval3"
                                       placeholder="7" value="7">
                                <input type="number" min="1" max="999" data-bind="value:replyNumber"
                                       onkeypress="return  (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                       class="form-control interval" id="inputLearningInterval4"
                                       placeholder="28" value="28">
                                <input type="number" min="1" max="999" data-bind="value:replyNumber"
                                       onkeypress="return  (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                       class="form-control interval" id="inputLearningInterval5"
                                       placeholder="84" value="84">
                            </div>
                            <div class="col-md-12">
                                <span id="errorInputLearningInterval" class="help-block name"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="cancelLearn" class="btn btn-default btn-raised btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_ "confirmLearn-form.cancel"}}</button>
                    <button id="confirmLearn" class="btn btn-success btn-raised btn-block col-xs-12 col-sm-3 pull-right"
                            data-dismiss="modal">{{_ "confirmLearn-form.confirm"}}</button>
                </div>
            </div>
        </div>
    </div><!-- /form group -->
</template>

<template name="cardsetEndLearnForm">
    <div class="modal fade" id="confirmEndLearnModal" tabindex="-1" role="dialog"
         aria-labelledby="confirmEndLearnModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="confirmEndLearnModalTitle" class="modal-title">{{_ "confirmEndLearn-form.title"}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <h5>{{_ "confirmEndLearn-form.warnTitle"}}</h5>
                        <p>{{_ "confirmEndLearn-form.warning"}}</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="cancelEndLearn" class="btn btn-default btn-raised btn-block col-xs-12 col-sm-3"
                            data-dismiss="modal">{{_ "confirmEndLearn-form.cancel"}}</button>
                    <button id="confirmEndLearn"
                            class="btn btn-danger btn-raised btn-block col-xs-12 col-sm-3 pull-right"
                            data-dismiss="modal">{{_ "confirmEndLearn-form.confirm"}}</button>
                </div>
            </div>
        </div>
    </div><!-- /form group -->
</template>

<template name="cardsetConfirmForm">
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="confirmModalTitle" class="modal-title">{{_ "confirm-form.title"}}</h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "confirm-form.text"}}</p>
                    <br/>
                    <hr/>
                    {{#unless learningActive}}
                        <button id="cardDelete" class="btn btn-default btn-setDelete">{{_
                                "confirm-form.title"}}</button>
                    {{/unless}}
                    <button id="cardCancel" class="btn btn-default pull-right" data-dismiss="modal">{{_
                            "modal-dialog.cancel"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="cardsetImportForm">
    <div class="modal fade" id="importModal" tabindex="-1" role="dialog" aria-labelledby="importModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="importModalTitle" class="modal-title">{{_ "upload-form.upload-title"}}</h4>
                </div>
                <div class="modal-body">
                    <p>{{_ "upload-form.popover-content"}}</p>
                    <a role='button' target='_blank' class='btn btn-default' href='/examples/example.json'>JSON</a>
                    <a role='button' target='_blank' class='btn btn-default' href='/examples/example.csv.txt'>CSV</a>
                    <hr/>
                </div>
                <div class="modal-footer">
                    {{#unless uploading}}
                        <button id="importCancel" class="btn btn-default btn-raised col-xs-12 col-sm-3 "
                                data-dismiss="modal">{{_
                                "modal-dialog.cancel"}}</button>
                        <span class="btn btn-success btn-file btn-raised col-xs-12 col-sm-4 pull-right">
							{{_ "upload-form.select-file"}}<input type="file" name="uploadFile">
					  </span>
                    {{else}}
                        <p><i class="fa fa-spin fa-refresh"></i>{{_ "upload-form.wait"}}</p>
                    {{/unless}}

                    <div id="uploadError"></div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="cardsetPublishForm">
    <div class="modal fade" id="publishModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="confirmModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="confirmModalTitle" class="modal-title">{{_ "sidebar-nav.publish"}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label"
                               for="newSetDescription">{{_ "modal-dialog.kind"}}:</label>
                        <div class="controls">
                            <div id="publishKind" class="btn-group"
                                 data-toggle="buttons">
                                <label id="kindoption0"
                                       class="btn btn-default {{#if kindIsActive 'personal'}}active{{/if}}">
                                    <input type="radio" name="kind" value="personal" id="kind_private">
                                    <div>Private</div>
                                </label>
                                <label id="kindoption1"
                                       class="btn btn-info {{#if kindIsActive 'free'}}active{{/if}}">
                                    <input type="radio" name="kind" value="free" id="free">
                                    <div>Free</div>
                                </label>
                                {{#if isInRole 'lecturer'}}
                                    <label id="kindoption2"
                                           class="btn btn-success {{#if kindIsActive 'edu'}}active{{/if}}">
                                        <input type="radio" name="kind" value="edu" id="kind_edu">
                                        <div>Edu</div>
                                    </label>
                                {{/if}}
                                {{#if isInRole 'pro'}}
                                    <label id="kindoption3"
                                           class="btn btn-danger {{#if kindIsActive 'pro'}}active{{/if}}">
                                        <input type="radio" name="kind" value="pro" id="kind_pro">
                                        <div>Pro</div>
                                    </label>
                                {{/if}}
                            </div>
                        </div>
                    </div>
                    {{#if kindWithPrice}}
                        <div class="form-group">
                            <label id="publishPriceLabel" class="col-md-3 control-label"
                                   for="publishPrice">{{_ "modal-dialog.price"}} (€)</label>
                            <div class="col-md-9">
                                <div class="input-group">
                                    <select id="publishPrice" class="form-control">
                                        <option {{priceIsSelected 0.99}}>{{getPrice "0.99" false}}</option>
                                        <option {{priceIsSelected 1.99}}>{{getPrice "1.99" false}}</option>
                                        <option {{priceIsSelected 2.99}}>{{getPrice "2.99" false}}</option>
                                        <option {{priceIsSelected 3.99}}>{{getPrice "3.99" false}}</option>
                                        <option {{priceIsSelected 4.99}}>{{getPrice "4.99" false}}</option>
                                        <option {{priceIsSelected 5.99}}>{{getPrice "5.99" false}}</option>
                                        <option {{priceIsSelected 6.99}}>{{getPrice "6.99" false}}</option>
                                        <option {{priceIsSelected 7.99}}>{{getPrice "7.99" false}}</option>
                                        <option {{priceIsSelected 8.99}}>{{getPrice "8.99" false}}</option>
                                        <option {{priceIsSelected 9.99}}>{{getPrice "9.99" false}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    {{/if}}
                </div>
                <div class="modal-footer">
                    <button id="cardsetCancel" class="btn btn-default btn-raised pull-left"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                    <button id="cardsetPublish"
                            class="btn btn-raised btn-success pull-right">{{_ "modal-dialog.publish"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="cardsetManageEditors">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{#unless isCardsetOwner _id}}
                {{> access_denied_content_only}}
            {{else}}
                <div class="container">
                    <h3 class="modal-title">{{_ "modal-dialog.manageEditors" name = this.name}}</h3>
                    <div style="overflow-x:auto;">
                        <table class="table table-striped table-hover">
                            <tbody>
                            <tr class="active">
                                <th>{{_ "panel-body.givenname"}}</th>
                                <th>{{_ "panel-body.birthname"}}</th>
                                <th>{{_ "panel-body.roles"}}</th>
                                <th></th>
                            </tr>
                            {{#each getEditors}}
                                <tr>
                                    <td>{{this.givenname}}</td>
                                    <td>{{this.birthname}}</td>
                                    <td> {{getRoles this.roles}}</td>
                                    <td>
                                        {{#if isCardsetEditor this.id}}
                                            <a class="btn btn-block btn-raised btn-danger removeEditor"
                                               data-id="{{this.id}}">
                                                <i class="fa fa-minus"></i> {{_ "admin.cardset.removeFromWordcloud"}}
                                            </a>
                                        {{else}}
                                            <a class="btn btn-block btn-raised btn-success addEditor"
                                               data-id="{{this.id}}">
                                                <i class="fa fa-plus"></i> {{_ "admin.cardset.addToWordcloud"}}
                                            </a>
                                        {{/if}}
                                    </td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-block btn-raised btn-danger" id="backButton">
                        <span class="pull-left">{{_ "backbutton"}}</span>
                    </button>
                </div>
            {{/unless}}
        {{/if}}
    {{/if}}
</template>

<template name="selectLicenseForm">
    <div class="modal fade" id="selectLicenseModal" tabindex="-1" role="dialog"
         aria-labelledby="selectLicenseModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="selectLicenseModalTitle" class="modal-title">{{_ "sidebar-nav.license"}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label id="modulesLabel" class="col-md-3 control-label"
                                   for="newSetDescription">{{_ "modal-dialog.modules"}}</label>
                            <div class="controls col-md-9">
                                <div id="cc-modules" class="btn-group" data-toggle="buttons">
                                    <label id="cc-option0"
                                           class="btn btn-default {{#if licenseIsActive 'by'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="by" id="cc-by">
                                        <img src="/img/by.large.png" alt="Namensnennung"/>
                                    </label>
                                    <label id="cc-option1"
                                           class="btn btn-default {{#if licenseIsActive 'nc'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="nc" id="cc-nc">
                                        <img src="/img/nc-eu.large.png" alt="Nicht kommerziell"/>
                                    </label>
                                    <label id="cc-option2"
                                           class="btn btn-default {{#if licenseIsActive 'nd'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="nd" id="cc-nd">
                                        <img src="/img/nd.large.png" alt="Keine Bearbeitung"/>
                                    </label>
                                    <label id="cc-option3"
                                           class="btn btn-default {{#if licenseIsActive 'sa'}}active{{/if}}"
                                           style="width:100px">
                                        <input type="checkbox" autocomplete="off" value="sa" id="cc-sa">
                                        <img src="/img/sa.large.png" alt="Weitergabe unter gleichen Bedingungen"/>
                                    </label>
                                </div>
                                <span id="helpCC-modules" class="help-block cc-modules"></span>
                            </div>

                            <div id=cc-description class="col-md-12">
                                <hr>
                                <img class="col-md-2" src="/img/by.large.png" alt="Namensnennung"/>
                                <p class="col-md-10">{{_ "modal-dialog.by-desc"}}</p>
                                <img class="col-md-2" src="/img/nc-eu.large.png" alt="Nicht kommerziell"/>
                                <p class="col-md-10">{{_ "modal-dialog.nc-desc"}}</p>
                                <img class="col-md-2" src="/img/nd.large.png" alt="Keine Bearbeitung"/>
                                <p class="col-md-10">{{_ "modal-dialog.nd-desc"}}</p>
                                <img class="col-md-2" src="/img/sa.large.png"
                                     alt="Weitergabe unter gleichen Bedingungen"/>
                                <p class="col-md-10">{{_ "modal-dialog.sa-desc"}}</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="licenseCancel" class="btn btn-default btn-raised btn-block"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                    <button id="licenseSave" class="btn btn-success btn-raised btn-block pull-success pull-right">{{_
                            "modal-dialog.saveLicense"}}</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>

<template name="reportCardsetForm">
    <div class="modal fade" id="reportModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="reportModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="reportModalTitle" class="modal-title">{{_ "modal-dialog.report"}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "modal-dialog.cardsetowner"}}</label>
                            <p class="col-md-9">
                                {{getAuthorName this.owner}}
                            </p>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "modal-dialog.cardsetname"}}</label>
                            <p class="col-md-9">
                                {{name}}
                            </p>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">{{_ "modal-dialog.reason"}}</label>
                            <div class="input-group">
                                <select id="reportCardsetReason" class="form-control">
                                    {{#unless userDeleted}}
                                        <option>{{_ "modal-dialog.reportuser"}}</option>
                                    {{/unless}}
                                    <option>{{_ "modal-dialog.reportcardset"}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group text">
                            <label id="reportCardsetTextLabel" class="col-md-3 control-label"
                                   for="reportCardsetText">{{_ "modal-dialog.text"}}</label>
                            <div class="col-md-9">
                                <textarea class="form-control" rows="6" id="reportCardsetText"></textarea>
                                <span id="helpReportCardsetText" class="help-block text"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="reportCardsetCancel" class="btn btn-default btn-raised"
                            data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
                    <button id="reportCardsetSave" class="btn btn-success btn-raised">{{_
                            "modal-dialog.submitcomplaint"}}</button>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="leitnerLearning">
    <div class="col-md-9 flip-container" id="set-details-region">
        {{addToLeitner}}
        <div id="cardCarousel" class="carousel slide" data-interval="false">
            <div class="carousel-inner">
                <div class="empty-item">
                    <div class="box">
                        <div class="block">
                            {{#unless learningEnded}}
                                <div class="bs-callout bs-callout-info" id="callout-alerts-no-default">
                                    <h4><strong>{{_ "learnPhaseActiveHeader"}}</strong></h4>
                                    <p>{{_ "learnPhaseActiveBody"}}</p>
                                </div>
                                {{#if notEmpty}}
                                    <div class="alert alert-warning leitner-text" role="alert">{{Deadline}}</div>
                                    <br><br>
                                    <button id="learnBoxActive"
                                            class="btn btn-raised btn-success learn btn-block btn-learn">{{_
                                            "cardsToLearn"}}</button>
                                {{else}}
                                    {{#if allLearned}}
                                        <br><br>
                                        <div class="alert alert-success leitner-text" role="alert">{{_
                                                "learnedEverything"}}</div>
                                    {{else}}
                                        <br><br>
                                        <button id="learnBoxDisabled"
                                                class="btn btn-warning learn btn-block btn-learn"
                                                disabled>{{getNextCardTime}}</button>
                                    {{/if}}
                                {{/if}}
                            {{else}}
                                <div class="alert alert-danger leitner-header" role="alert">{{_
                                        "learnPhaseEnded"}}</div>
                            {{/unless}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<template name="cardsetLearnActivityStatistic">
    {{#if isInRole 'firstLogin'}}
        {{> first_login_content_only}}
    {{else}}
        {{#if isInRole 'blocked'}}
            {{> access_denied_content_only}}
        {{else}}
            {{#unless isEditor}}
                {{> access_denied_content_only}}
            {{else}}
                <div class="container">
                    <div id="cardsetInfoDetail">
                        <div class="panel panel-default cardsetInfo">
                            <div class="panel-body">
                                <h4>{{this.name}}</h4>
                                <hr>
                                <div class="row">
                                    <span class="col-sm-6 collapseCardsetInfoContainer">
                                        {{> cardsetInfoBox}}
                                    </span>
                                    <span class="col-sm-6 collapseCardsetInfoContainer">
                                        {{> learningPhaseInfoBox}}
                                    </span>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <button id="exportCSV" class="btn btn-success btn-raised btn-default">{{_
                                        "box_export"}}</button>
                            </div>
                        </div>
                    </div>
                    <div style="overflow-x:auto;">
                        <table class="table table-striped table-hover ">
                            <tbody>
                            <tr class="active">
                                <th>{{_ "panel-body.birthname"}}</th>
                                <th>{{_ "panel-body.givenname"}}</th>
                                <th>{{_ "panel-body.email"}}
                                    <a id="showIntervalHelp" href="#" class="field-tip pull-right">
                                        <i class="glyphicon glyphicon-info-sign"></i>
                                    </a>
                                </th>
                                <th>{{_ "subject1"}} [{{this.learningInterval.[0]}}]
                                    <div class="tip-content"><p>{{_ "subjectInfo" box=1
                                                                    count=this.learningInterval.[0]}}</p></div>
                                </th>
                                <th>{{_ "subject2"}} [{{this.learningInterval.[1]}}]
                                    <div class="tip-content"><p>{{_ "subjectInfo" box=2
                                                                    count=this.learningInterval.[1]}}</p></div>
                                </th>
                                <th>{{_ "subject3"}} [{{this.learningInterval.[2]}}]
                                    <div class="tip-content"><p>{{_ "subjectInfo" box=3
                                                                    count=this.learningInterval.[2]}}</p></div>
                                </th>
                                <th>{{_ "subject4"}} [{{this.learningInterval.[3]}}]
                                    <div class="tip-content"><p>{{_ "subjectInfo" box=4
                                                                    count=this.learningInterval.[3]}}</p></div>
                                </th>
                                <th>{{_ "subject5"}} [{{this.learningInterval.[4]}}]
                                    <div class="tip-content"><p>{{_ "subjectInfo" box=5
                                                                    count=this.learningInterval.[4]}}</p></div>
                                </th>
                                <th>{{_ "subject6"}}</th>
                                <th>{{_ "details"}}</th>
                            </tr>
                            {{#each getCardsetStats}}
                                <tr>
                                    <td>{{this.birthname}}</td>
                                    <td>{{this.givenname}}</td>
                                    <td><a href="mailto:{{this.email}}">{{this.email}}</a></td>
                                    <td>{{this.box1}}</td>
                                    <td>{{this.box2}}</td>
                                    <td>{{this.box3}}</td>
                                    <td>{{this.box4}}</td>
                                    <td>{{this.box5}}</td>
                                    <td>
                                        {{#if earnedTrophy}}
                                            <span class="green-learning-text">
                                                {{this.box6}}
                                            </span>

                                            <i class="fa fa-trophy pull-right"></i>
                                        {{else}}
                                            <span class="red-learning-text">
                                                {{this.box6}}
                                            </span>
                                        {{/if}}
                                    </td>
                                    <td>
                                        <button data-id="{{this.user_id}}" class="btn btn-block detailed-stats"><i
                                                class="glyphicon glyphicon glyphicon-stats"
                                                data-id="{{this.user_id}}"></i></button>
                                    </td>
                                </tr>
                            {{/each}}
                            </tbody>
                        </table>
                    </div>
                    <button class="btn btn-block btn-raised btn-danger" id="backButton">
                        <span class="pull-left">{{_ "backbutton"}}</span>
                    </button>
                </div>
            {{/unless}}
        {{/if}}
    {{/if}}
</template>

<template name="learningPhaseInfoBox">
    <a id="collapseLearningPhaseInfoButton" class="col-xs-12 card card-block collapseButton"
       href="#collapseLearningPhaseInfo" data-toggle="collapse">
        <strong>{{_ "set-list.learnphaseInfo"}}</strong>
        <i id="collapseLearningPhaseInfoIcon" class="glyphicon glyphicon-collapse-down pull-right"></i>
    </a>
    <div class="collapse" id="collapseLearningPhaseInfo">
        <div class="card card-block">
            <table class="table table-condensed table-striped table-hover infoBoxTable">
                <tbody>
                <tr>
                    <td><strong>{{_ "set-list.learnphase"}}:</strong></td>
                    <td>{{getLearningStatus}}</td>
                </tr>
                <tr>
                    <td><strong>{{_ "pool.activeLearners"}}:</strong></td>
                    <td>{{this.learners}}</td>
                </tr>
                <tr>
                    <td><strong>{{_ "confirmLearn-form.maxCards"}}:</strong></td>
                    <td>{{getWorkload}}</td>
                </tr>
                <tr>
                    <td><strong>{{_ "confirmLearn-form.daysBeforeReset"}}:</strong></td>
                    <td>{{getDeadline}}</td>
                </tr>
                <tr>
                    <td><strong>{{_ "confirmLearn-form.learningStart"}}:</strong></td>
                    <td>{{getDateStart}}</td>
                </tr>
                <tr>
                    <td><strong>{{_ "confirmLearn-form.learningEnd"}}:</strong></td>
                    <td>{{getDateEnd}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</template>

<template name="showLicense">
    <div class="modal fade" id="showLicenseModal" tabindex="-1" role="dialog"
         aria-labelledby="showLicenseTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="showLicenseTitle" class="modal-title">{{_ "sidebar-nav.poolLicense"}} {{_ "set-list.topic"}}
                        : {{getTopic}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div id=cc-description class="col-md-12">
                                {{#if getLicenseCount}}
                                    {{#if getLicenseType 'by'}}
                                        <img class="col-md-2" src="/img/by.large.png" alt="Namensnennung"/>
                                        <p class="col-md-10">{{_ "modal-dialog.by-desc"}}</p>
                                    {{/if}}
                                    {{#if getLicenseType 'nc'}}
                                        <img class="col-md-2" src="/img/nc-eu.large.png" alt="Nicht kommerziell"/>
                                        <p class="col-md-10">{{_ "modal-dialog.nc-desc"}}</p>
                                    {{/if}}
                                    {{#if getLicenseType 'nd'}}
                                        <img class="col-md-2" src="/img/nd.large.png" alt="Keine Bearbeitung"/>
                                        <p class="col-md-10">{{_ "modal-dialog.nd-desc"}}</p>
                                    {{/if}}
                                    {{#if getLicenseType 'sa'}}
                                        <img class="col-md-2" src="/img/sa.large.png"
                                             alt="Weitergabe unter gleichen Bedingungen"/>
                                        <p class="col-md-10">{{_ "modal-dialog.sa-desc"}}</p>
                                    {{/if}}
                                {{else}}
                                    <img class="col-md-2" src="/img/zero.large.png" alt="Keine Lizenz"/>
                                    <p class="col-md-10">{{_ "modal-dialog.zero-desc"}}</p>
                                {{/if}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>
    <!-- /.modal -->
</template>
