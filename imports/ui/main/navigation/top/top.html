<template name="mainNavigationTop">
    {{#unless fullscreenActive}}
        {{#if currentUser}}
            {{#unless isInRole 'firstLogin'}}
                {{#unless isInRole 'blocked'}}
                    <nav class="navbar navbar-default navbar-fixed-top">
                        <div class="container thm-header">
                            <div class="visible-xs navbar-header">
                                <div class="flex-content pull-left">
                                    {{{getNavigationName}}}
                                </div>
                                <div class="flex-content pull-right">
                                    <ul class="list-inline">
                                        {{> mainNavigationTopItemSearch visibility=0}}
                                        {{> mainNavigationTopItemConnectionStatus visibility=0}}
                                        {{#if isImpressum}}
                                            <li class="toggleImpressumNavigation needsclick">
                                                <div class="flex-content">
                                                    {{{getNavigationName "toggleImpressum"}}}
                                                </div>
                                            </li>
                                        {{/if}}
                                    </ul>
                                    <button type="button"
                                            class="navbar-toggle pull-right toggle-thm-collapse needsclick">
                                        <span class="icon-bar toggle-thm-collapse needsclick"></span>
                                        <span class="icon-bar toggle-thm-collapse needsclick"></span>
                                        <span class="icon-bar toggle-thm-collapse needsclick"></span>
                                    </button>
                                </div>
                            </div>
                            <div class="visible-xs">
                                {{> impressumNavigationDropdownContent}}
                            </div>
                            {{> mainNavigationTopDropdownContent}}
                        </div>
                    </nav>
                {{/unless}}
            {{/unless}}
        {{/if}}
    {{/unless}}
</template>

<template name="mainNavigationTopDropdownContent">
    <div class="collapse navbar-collapse" id="thm-top-navigation">
        <ul id="navbar" class="nav navbar-nav navbar-left">
            {{> mainNavigationTopItemSearch visibility=1}}
            {{> mainNavigationTopItemPool}}
            {{> mainNavigationTopItemRepetitorium}}
            {{> mainNavigationTopItemWorkload}}
            {{> mainNavigationTopItemMyCardsets}}
            {{> mainNavigationTopItemHelp}}
        </ul>
        <ul class="nav navbar-nav navbar-right">
            {{> mainNavigationTopItemAllCardsets}}
            {{> mainNavigationTopItemBackend}}
            {{> mainNavigationTopItemConnectionStatus visibility=1}}
            {{> mainNavigationTopItemProfile}}
            {{> mainNavigationTopItemLogout}}
        </ul>
    </div>
</template>
