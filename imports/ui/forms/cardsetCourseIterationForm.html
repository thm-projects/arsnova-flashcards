<template name="cardsetCourseIterationForm">
    <div class="modal fade" id="setCardsetCourseIterationFormModal" tabindex="-1" data-backdrop="static" role="dialog"
         aria-labelledby="setCardsetCourseIterationFormModalTitle">
        <div class="modal-dialog">
            <div class="modal-content">
                {{#unless isActiveRoute 'admin_cardset'}}
                    <div class="modal-header">
                        <h4 id="setCardsetCourseIterationFormModalTitle" class="modal-title">
                            {{#if isNew}}
                                {{#if isCourseIteration}}
                                    {{_ "courseIteration.modal.new"}}
                                {{else}}
                                    {{_ "modal-dialog.newcarddeck"}}
                                {{/if}}
                            {{else}}
                                {{_ "modal-dialog.editcard"}}
                            {{/if}}
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </h4>
                    </div>
                {{/unless}}
                {{> cardsetCourseIterationFormContent}}
            </div>
        </div>
    </div>
</template>

<template name="cardsetCourseIterationFormContent">
    <div class="modal-body">
        <div class="form-horizontal">
            <div class="form-group setdetails name">
                <label id="setNameLabel" class="col-md-3 control-label"
                       for="setName">{{_ "modal-dialog.name"}}</label>
                <div class="col-md-9">
                    <input class="form-control" type="text" id="setName"
                           placeholder="{{#if isCourseIteration}}{{_
                                   "courseIteration.modal.placeholder.name"}}{{else}}{{_
                                   "modal-dialog.nameplaceholder"}}{{/if}}"
                           value="{{#if isNew}}{{getShuffleName}}{{else}}{{name}}{{/if}}">
                    <span id="helpSetName" class="help-block name"></span>
                </div>
                <br>
                {{#unless isCourseIteration}}
                    {{#unless learningActive}}
                        <label id="setCardTypeLabel" class="col-md-3 control-label" for="setCardType">{{_
                                "cardType"}}</label>
                        <div class="dropdown">
                            <div class="btn-group col-xs-12 col-sm-12 col-md-9">
                                <button id="setCardType" type="button"
                                        class="btn btn-raised btn-default setCardTypeDropdown longButton"
                                        data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false"
                                        value="{{#if isNew}}0{{else}}{{cardType}}{{/if}}">
                                    {{#if isNew}}{{_ "card.cardType0.name"}}{{else}}{{getCardTypeName cardType}}{{/if}}
                                </button>
                                <button type="button"
                                        class="btn btn-raised dropdown-toggle setCardTypeDropdown"
                                        data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                    <span class="caret"></span>
                                    <span class="sr-only"></span>
                                </button>
                                <ul class="dropdown-menu btn-raised longButton">
                                    {{> cardTypesList filter=false}}
                                </ul>
                                <span id="helpSetCardType" class="help-block cardType"></span>
                            </div>
                        </div>
                    {{/unless}}
                    {{#if gotDifficultyLevel}}
                        <br>
                        <label id="setDifficultyLabel" class="col-md-3 control-label" for="setDifficulty">{{#if
                                gotNotesForDifficultyLevel}}{{_ "difficultyNotes"}}{{else}}{{_
                                "difficulty"}}{{/if}}</label>
                        <div id="setDifficulty" class="col-md-9 cardtext editorElement">
                            {{> difficultyEditor}}
                        </div>
                    {{/if}}
                {{/unless}}
            </div>
            {{#if isCourseIteration}}
                <div class="form-group setdetails name">
                    <label id="setTargetAudienceLabel" class="col-md-3 control-label" for="setTargetAudience">{{_
                            "courseIteration.targetAudience"}}</label>
                    <div class="dropdown">
                        <div class="btn-group col-xs-12 col-sm-12 col-md-9">
                            <button id="setTargetAudience" type="button"
                                    class="btn btn-raised btn-default setTargetAudienceDropdown longButton"
                                    data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false"
                                    value="{{#if isNew}}1{{else}}{{targetAudience}}{{/if}}">
                                {{#if isNew}}{{_ "courseIteration.targetAudience1.name"}}{{else}}{{getTargetAudienceName
                                        targetAudience}}{{/if}}
                            </button>
                            <button type="button"
                                    class="btn btn-raised dropdown-toggle setTargetAudienceDropdown"
                                    data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false">
                                <span class="caret"></span>
                                <span class="sr-only"></span>
                            </button>
                            <ul class="dropdown-menu btn-raised longButton">
                                {{> targetAudienceList}}
                            </ul>
                            <span id="helpSetTargetAudience" class="help-block targetAudience"></span>
                        </div>
                    </div>
                </div>
                {{#if gotSemester}}
                    <div class="form-group setdetails name">
                        <label id="setSemesterLabel" class="col-md-3 control-label" for="setSemester">{{_
                                "courseIteration.list.semester"}}</label>
                        <div class="dropdown">
                            <div class="btn-group col-xs-12 col-sm-12 col-md-9">
                                <button id="setSemester" type="button"
                                        class="btn btn-raised btn-default setSemesterDropdown longButton"
                                        data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false"
                                        value="{{#if isNew}}1{{else}}{{semester}}{{/if}}">
                                    {{#if isNew}}{{_ "courseIteration.list.semesterList" count=1}}{{else}}{{_
                                            "courseIteration.list.semesterList"
                                            count=semester}}{{/if}}
                                </button>
                                <button type="button"
                                        class="btn btn-raised dropdown-toggle setSemesterDropdown"
                                        data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="false">
                                    <span class="caret"></span>
                                    <span class="sr-only"></span>
                                </button>
                                <ul class="dropdown-menu btn-raised longButton">
                                    {{>semesterList}}
                                </ul>
                                <span id="helpSetSemester" class="help-block semester"></span>
                            </div>
                        </div>
                    </div>
                {{/if}}
                {{#if gotAccessControl}}
                    {{#if isInRole 'admin,editor,lecturer,pro'}}
                        {{> publishKind}}
                    {{/if}}
                {{/if}}
            {{/if}}
            <div class="form-group setdetails description module">
                                         <textarea class="form-control" data-provide="markdown" rows="12"
                                                   placeholder="{{#if isCourseIteration}}{{_
                                                           "courseIteration.modal.placeholder.description"}}{{else}}{{_
                                                           "modal-dialog.descriptionplaceholder"}}{{/if}}"
                                                   id="setDescription"
                                                   value="{{#if
                                                           isNew}}{{getShuffleDescription}}{{else}}{{description}}{{/if}}"></textarea>
                <span id="helpSetDescription" class="help-block description"></span>
            </div>
            {{#if isCourseIteration}}
                {{#unless singleUniversity}}
                    <!-- start college Dropdown -->
                    <div class="form-group setdetails categories module">
                        <label id="setCollegeLabel" class="col-md-3 control-label" for="setCollege">{{_
                                "modal-dialog.college"}}</label>
                        <div class="dropup">
                            <div class="btn-group col-xs-12 col-sm-12 col-md-9">
                                <button id="setCollege" type="button"
                                        class="btn btn-default btn-raised setCollegeDropdown longButton"
                                        data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="false"
                                        value="{{#unless isNew}}{{getCollege this.college
                                                                             0}}{{/unless}}">{{#if
                                        isNew}}{{#unless isShuffleRoute}}{{_
                                        "modal-dialog.college_required"}}{{/unless}}{{else}}{{getCollege
                                        this.college
                                        1}}{{/if}}</button>
                                <button class="btn dropdown-toggle btn-raised setCollegeDropdown"
                                        type="button"
                                        data-toggle="dropdown"
                                        aria-haspopup="true" aria-expanded="true">
                                    <span class="caret"></span>
                                    <span class="sr-only"></span>
                                </button>
                                <ul class="dropdown-menu longButton">
                                    {{#each getColleges}}
                                        <li class="college" value="{{_id}}" data="{{this.college}}"><a
                                                href="#">{{this.college}}</a></li>
                                    {{/each}}
                                </ul>
                                <span id="helpSetCollege" class="help-block college"></span>
                            </div>
                        </div>
                    </div><!-- / college Dropdown -->
                {{/unless}}
                <!-- start course Dropdown -->
                <div class="form-group setdetails categories module">
                    <label id="setCourseLabel" class="col-md-3 control-label" for="setCourse">{{_
                            "modal-dialog.course"}}</label>
                    <div class="dropup">
                        <div class="btn-group col-xs-12 col-sm-12 col-md-9">
                            <button id="setCourse" type="button"
                                    class="btn btn-raised btn-default setCourseDropdown longButton"
                                    data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false"
                                    value="{{#unless isNew}}{{getCourse this.course
                                                                        0}}{{/unless}}" {{isDisabled
                                    this.college}}>{{#if isNew}}{{#unless isShuffleRoute}}{{_
                                    "modal-dialog.course_required"}}{{/unless}}{{else}}{{getCourse this.course
                                                                                                   1}}{{/if}}</button>
                            <button type="button"
                                    class="btn btn-raised dropdown-toggle setCourseDropdown"
                                    data-toggle="dropdown"
                                    aria-haspopup="true" aria-expanded="false" {{isDisabled
                                    this.college}}>
                                <span class="caret"></span>
                                <span class="sr-only"></span>
                            </button>
                            <ul class="dropdown-menu btn-raised longButton">
                                {{#each getCourses}}
                                    <li class="course" value="{{_id}}" data="{{this.course}}"><a
                                            href="#">{{this.course}}</a></li>
                                {{/each}}
                            </ul>
                            <span id="helpSetCourse" class="help-block course"></span>
                        </div>
                    </div>
                </div><!-- / course Dropdown -->
                <!-- start module textfield -->
                <div class="form-group setdetails name module">
                    <label id="setModuleLabel" class="col-md-3 control-label"
                           for="setModule">{{_ "modal-dialog.module"}}</label>
                    <div class="col-md-9">
                        <input class="form-control" type="text" id="setModule"
                               placeholder="{{_ "modal-dialog.moduleplaceholder"}}"
                               value="{{#if
                                       isNew}}{{getShuffleModule}}{{else}}{{module}}{{/if}}">
                        <span id="helpSetModule" class="help-block name"></span>
                    </div>
                </div><!-- / module textfield -->
                <!-- start module textfield -->
                <div class="form-group setdetails name module">
                    <label id="setModuleShortLabel" class="col-md-3 control-label"
                           for="setModuleShort">{{_ "modal-dialog.moduleShort"}}</label>
                    <div class="col-md-9">
                        <input class="form-control" type="text" id="setModuleShort"
                               placeholder="{{_ "modal-dialog.moduleShortplaceholder"}}"
                               value="{{#if
                                       isNew}}{{getShuffleModuleShort}}{{else}}{{moduleToken}}{{/if}}">
                        <span id="helpSetModuleShort" class="help-block name"></span>
                    </div>
                </div><!-- / module textfield -->
                <!-- start module textfield -->
                <div class="form-group setdetails name module">
                    <label id="setModuleNumLabel" class="col-md-3 control-label"
                           for="setModuleNum">{{_ "modal-dialog.moduleNum"}}</label>
                    <div class="col-md-9">
                        <input class="form-control" type="text" id="setModuleNum"
                               placeholder="{{_ "modal-dialog.moduleNumplaceholder"}}"
                               value="{{#if
                                       isNew}}{{getShuffleModuleNum}}{{else}}{{moduleNum}}{{/if}}">
                        <span id="helpSetModuleNum" class="help-block name"></span>
                    </div>
                </div><!-- / module textfield -->
                <div class="form-group setdetails name module">
                    <label id="setModuleLinkLabel" class="col-md-3 control-label"
                           for="setModuleLink">{{_
                            "modal-dialog.moduleLink"}}</label>
                    <div class="col-md-9">
                        <input class="form-control" type="text" id="setModuleLink"
                               placeholder="{{_ "modal-dialog.moduleLinkplaceholder"}}"
                               value="{{#if
                                       isNew}}{{getShuffleModuleLink}}{{else}}{{moduleLink}}{{/if}}">
                    </div>
                </div><!-- / module textfield -->
            {{/if}}
        </div>
    </div>
    {{#unless isActiveRoute 'admin_cardset'}}
        <div class="modal-footer">
            {{#unless isNew}}
                {{#unless learningActive}}
                    <button id="cardSetDelete"
                            class="btn btn-raised btn-danger btn-block btn-setDelete col-xs-12 col-sm-3">{{_
                            "modal-dialog.delete"}}</button>
                    <button id="cardSetConfirm"
                            class="btn btn-raised btn-warning btn-block col-xs-12 col-sm-3"
                            style="display:none">{{_
                            "modal-dialog.confirm"}}</button>
                {{/unless}}
            {{/unless}}
            <button id="cardSetCancel" class="btn btn-raised {{#unless
                    isNew}}cardSetCancel{{/unless}} btn-default btn-block col-xs-12 col-sm-3"
                    data-dismiss="modal">{{_
                    "modal-dialog.cancel"}}</button>
            <button id="cardSetSave"
                    class="btn btn-raised btn-success btn-block col-xs-12 col-sm-3 pull-right">{{#if
                    isNew}}{{_ "modal-dialog.createcarddeck"}}{{else}}{{_
                    "modal-dialog.save"}}{{/if}}</button>
        </div>
    {{/unless}}
</template>

<template name="semesterList">
    {{#if this.filter}}
        {{#each getSemesters}}
            {{#if displaySemester}}
                <li class="filterSemester semester" value="{{this.semester}}" data-id="{{this.semester}}"><a
                        href="#" data-id="{{this.semester}}">{{_ "courseIteration.list.semesterList"
                                                                 count=this.semester}}
                    {{#if activeFilter}}
                        <span class="glyphicon glyphicon-filter"></span>
                    {{/if}}
                </a>
                </li>
            {{/if}}
        {{/each}}
    {{else}}
        {{#each getSemesters}}
            <li class="filterSemester semester" value="{{this.semester}}" data-id="{{this.semester}}"><a
                    href="#" data-id="{{this.semester}}">{{_ "courseIteration.list.semesterList"
                                                             count=this.semester}}</a></li>
        {{/each}}
    {{/if}}
</template>

<template name="targetAudienceList">
    {{#if this.filter}}
        {{#each getTargetAudiences}}
            {{#if displayTargetAudience}}
                <li class="filterTargetAudience targetAudience" value="{{this.targetAudience}}"
                    data-id="{{this.targetAudience}}"><a
                        href="#" data-id="{{this.targetAudience}}">{{getTargetAudienceName this.targetAudience}}
                    {{#if activeFilter}}
                        <span class="glyphicon glyphicon-filter"></span>
                    {{/if}}
                </a>
                </li>
            {{/if}}
        {{/each}}
    {{else}}
        {{#each getTargetAudiences}}
            <li class="targetAudience" value="{{this.targetAudience}}" data-id="{{this.targetAudience}}"><a
                    href="#" data-id="{{this.targetAudience}}">{{getTargetAudienceName this.targetAudience}}</a></li>
        {{/each}}
    {{/if}}

</template>

<template name="difficultyEditor">
    <div id="difficultyGroup" class="form-group btn-group" role="group" data-toggle="buttons">
        {{#if gotNotesForDifficultyLevel}}
            <label id="difficulty0"
                   class="col-xs-6 col-sm-3 btn btn-default {{#if
                           gotNotesForDifficultyLevel}}btn-orange{{else}}btn-white{{/if}} {{#if
                           isDifficultyChecked 0}}active{{/if}}"
                   data-color="0">
                {{#if isDifficultyChecked 0}}
                    <input type="radio" name="difficulty" value="0" checked tabindex="3">
                {{else}}
                    <input type="radio" name="difficulty" value="0">
                {{/if}}
                {{#unless gotNotesForDifficultyLevel}}
                    {{_ "difficulty0"}}
                {{else}}
                    {{_ "difficultyNotes0"}}
                {{/unless}}
            </label>
        {{/if}}
        <label id="difficulty1"
               class="col-xs-6 {{#if
                       gotNotesForDifficultyLevel}}col-sm-3{{else}}col-sm-4{{/if}} btn btn-default btn-info {{#if
                       isDifficultyChecked 1}}active{{/if}}"
               data-color="1">
            {{#if isDifficultyChecked 1}}
                <input type="radio" name="difficulty" value="1" checked tabindex="3">
            {{else}}
                <input type="radio" name="difficulty" value="1">
            {{/if}}
            {{#unless gotNotesForDifficultyLevel}}
                {{_ "difficulty1"}}
            {{else}}
                {{_ "difficultyNotes1"}}
            {{/unless}}
        </label>
        <label id="difficulty2"
               class="col-xs-6 {{#if
                       gotNotesForDifficultyLevel}}col-sm-3{{else}}col-sm-4{{/if}} btn btn-default btn-success {{#if
                       isDifficultyChecked 2}}active{{/if}}"
               data-color="2">
            {{#if isDifficultyChecked 2}}
                <input type="radio" name="difficulty" value="2" checked tabindex="3">
            {{else}}
                <input type="radio" name="difficulty" value="2">
            {{/if}}
            {{#unless gotNotesForDifficultyLevel}}
                {{_ "difficulty2"}}
            {{else}}
                {{_ "difficultyNotes2"}}
            {{/unless}}
        </label>
        <label id="difficulty3"
               class="col-xs-6 {{#if
                       gotNotesForDifficultyLevel}}col-sm-3{{else}}col-sm-4{{/if}} btn btn-default btn-danger {{#if
                       isDifficultyChecked 3}}active{{/if}}"
               data-color="3">
            {{#if isDifficultyChecked 3}}
                <input type="radio" name="difficulty" value="3" checked tabindex="3">
            {{else}}
                <input type="radio" name="difficulty" value="3">
            {{/if}}
            {{#unless gotNotesForDifficultyLevel}}
                {{_ "difficulty3"}}
            {{else}}
                {{_ "difficultyNotes3"}}
            {{/unless}}
        </label>
    </div>
</template>
