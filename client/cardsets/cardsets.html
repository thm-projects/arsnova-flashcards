<template name="cardsets">
  {{> cardsetsForm}}


  {{> sidebarCardsets}}
  {{#if isActiveRoute 'created'}}
    {{> created}}
  {{/if}}
  {{#if isActiveRoute 'learned'}}
    {{> learned}}
  {{/if}}
</template>


<template name="sidebarCardsets">
  <div id='set-list-sidebar-region' class="col-md-3">
    <div class="well well-sm sidebar-nav">
      <div class="input-group">
        <input class="form-control" type="text" id="new-set-input" placeholder="{{_ "input-group.newcarddeck"}}">
        <span class="input-group-btn">
          <button id="newCardSet" type="button" class="btn btn-primary saveSet" data-toggle="modal" data-target="#newSetModal"><i class="glyphicon glyphicon-plus"></i></button>
        </span>
      </div>

      <hr />

      <div class="input-group">
        <input class="form-control" type="text" id="file" placeholder="{{_ "upload-form.import"}}">
        <span class="input-group-btn">
          <button id="fileHelp" class="btn btn-default" data-toggle="popover" data-html="true" data-trigger="click" data-container="body" data-content="{{_ "upload-form.popover-content"}}"><i class="glyphicon glyphicon-question-sign"></i></button>
          <button id="fileSubmit" class="btn btn-primary disabled" type="submit"><i class="glyphicon glyphicon-cloud-upload"></i></button>
        </span>
      </div>

      <hr />

      <ul class="nav nav-list">
        <li class="nav-header">{{_ "nav-list.category"}}</li>
        <li class="{{#if isActiveRoute 'created'}}active{{/if}}">
          <a id="setCreated" href="{{pathFor route='created'}}" name="set-created">
            {{_ "nav-list.created"}}
          </a>
        </li>
        <li class="{{#if isActiveRoute 'learned'}}active{{/if}}">
          <a id="setLearned" href="{{pathFor route='learned'}}" name="set-learned">
            {{_ "nav-list.learned"}}
          </a>
        </li>
      </ul>
    </div>
  </div>
</template>


<template name="created">
  <div class="col-md-9" id="set-list-region">
    <table class="table table-bordered table-striped table-hover">
      <thead class="set-list">
        <tr>
          <th>
            <span>{{_ "set-list.name"}}</span>
            <a class="namedown" href="#">⇓</a>
            <a class="nameup" href="#">⇑</a>
          </th>
          <th>
            <span>{{_ "set-list.category"}}</span>
            <a class="categorydown" href="#">⇓</a>
            <a class="categoryup" href="#">⇑</a>
          </th>
          <th>
            <span>{{_ "set-list.description"}}</span>
            <a class="descriptiondown" href="#">⇓</a>
            <a class="descriptionup" href="#">⇑</a>
          </th>
        </tr>
      </thead>
      <tbody id="cardSetView">
        {{#if cardsetList.count}}
          {{#each cardsetList}}
            {{> cardsetRow}}
          {{/each}}
        {{else}}
          {{> cardsetEmpty}}
        {{/if}}
      </tbody>
    </table>
  </div>
</template>


<template name="cardsetRow">
  <tr class="cardsetRow">
    <td><a href="/cardset/{{_id}}">{{name}}<span class="badge cardsetBadge">{{countCards this._id}}</span></a></td>
    <td>{{getCategory this.category }}</td>
    <td>{{description}}</td>
  </tr>
</template>


<template name="cardsetEmpty">
  <tr class="empty-list">
    <td align="center" height="60" colspan="3" class="emptyCellList set-list-empty">
      <span class="emptyTextList">{{_ "set-list-empty.emptytextlist"}}</span>
      <br>
        <button id="setListEmpty" class="btn btn-primary btn-newSet" data-toggle="modal" data-target="#newSetModal">{{_ "set-list-empty.newset"}}</button>
    </td>
  </tr>
</template>

<template name="learned">
  <div id="set-list-region" class="col-md-9"><table class="table table-bordered table-striped table-hover">
    <thead class="set-list">
      <tr>
        <th><span>{{_ "set-list.name"}}</span> <a onclick="Cards.Set.Controller.showListLayout('name', 'down');" href="">⇓</a><a onclick="Cards.Set.Controller.showListLayout('name', 'up');" href="">⇑</a></th>
        <th width="25%"><span>{{_ "set-list.category"}}</span> <a onclick="Cards.Set.Controller.showListLayout('category', 'down');" href="">⇓</a><a onclick="Cards.Set.Controller.showListLayout('category', 'up');" href="">⇑</a></th>
        <th width="40%"><span>{{_ "set-list.description"}}</span> <a onclick="Cards.Set.Controller.showListLayout('description', 'down');" href="">⇓</a><a onclick="Cards.Set.Controller.showListLayout('description', 'up');" href="">⇑</a></th>
      </tr>
    </thead>
    <tbody id="cardSetView"><tr class="empty-list">
      <td align="center" height="60" colspan="3" class="emptyCellList set-list-learned-empty">
        <span class="emptyTextList">{{_ "set-list-learned-empty.emptytextlist"}}</span>
        <br><br>
      </td>
    </tr></tbody>
  </table></div>
</template>


<template name="cardsetsForm">
  <div class="modal fade" id="newSetModal" tabindex="-1" role="dialog" aria-labelledby="newSetModalTitle">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 id="newSetModalTitle" class="modal-title">{{_ "modal-dialog.newcarddeck"}}</h4>
        </div>
        <div class="modal-body">
          <div class="form-horizontal">
            <div class="form-group setdetails name">
              <label class="col-md-3 control-label" for="newSetName">{{_ "modal-dialog.name"}}</label>
              <div class="col-md-9">
                <input class="form-control" type="text" id="newSetName" placeholder="{{_ "modal-dialog.nameplaceholder"}}">
                <span id="helpNewSetName" class="help-block name"></span>
              </div>
            </div>
            <div class="form-group setdetails description">
              <label class="col-md-3 control-label" for="newSetDescription">{{_ "modal-dialog.description"}}</label>
              <div class="col-md-9">
                <textarea class="form-control" rows="3" id="newSetDescription" placeholder="{{_ "modal-dialog.descriptionplaceholder"}}"></textarea>
                <span id="helpNewSetDescription" class="help-block description"></span>
              </div>
            </div>
            <div class="form-group setdetails categories">
              <label class="col-md-3 control-label" for="newSetCategory">{{_ "modal-dialog.category"}}</label>
              <div class="col-md-9">
                <div class="dropdown">
                  <button class="btn btn-default dropdown-toggle" type="button" id="newSetCategoryDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    <span id="newSetCategory">{{_ "modal-dialog.categoryplaceholder"}}</span>
                    <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu">
                    {{#each getCategories}}
                      <li class="category" value="{{_id}}" data="{{name}}"><a href="#">{{name}}</a></li>
                    {{/each}}
                  </ul>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label" for="newSetDescription">{{_ "modal-dialog.visibility"}}</label>
              <div class="controls col-md-9">
                <div id="newCardSetVisibility" class="btn-group" data-toggle="buttons">
                  <label id="newCardSetVisibilityoption1" class="btn btn-default active visible" style="width:100px">
                    <input type="radio" name="options" id="visibility_private" value="false"><div>{{_ "modal-dialog.visibilityoption1"}}</div>
                  </label>
                  <label id="newCardSetVisibilityoption2" class="btn btn-default visible" style="width:100px">
                    <input type="radio" name="options" id="visibility_public" value="true"><div>{{_ "modal-dialog.visibilityoption2"}}</div>
                  </label>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label class="col-md-3 control-label" for="newSetDescription">{{_ "modal-dialog.rating"}}</label>
              <div class="controls col-md-9">
                <div id="newCardSetRating" class="btn-group btn-group-rating" data-toggle="buttons">
                  <label id="newCardSetRatingoption1" class="btn btn-default active" style="width:100px">
                    <input type="radio" name="rating" value="true" id="rating_true"><div>{{_ "modal-dialog.ratingoption1"}}</div>
                  </label>
                  <label id="newCardSetRatingoption2" class="btn btn-default" style="width:100px">
                    <input type="radio" name="rating" value="false" id="rating_false"><div>{{_ "modal-dialog.ratingoption2"}}</div>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-default cancel" data-dismiss="modal">{{_ "modal-dialog.cancel"}}</button>
          <button class="btn btn-primary save" data-dismiss="modal">{{_ "modal-dialog.createcarddeck"}}</button>
        </div>
      </div>
    </div>
  </div>
</template>
